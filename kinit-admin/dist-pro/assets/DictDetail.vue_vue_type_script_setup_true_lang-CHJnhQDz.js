var Z=Object.defineProperty;var I=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var V=(n,s,t)=>s in n?Z(n,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[s]=t,$=(n,s)=>{for(var t in s||(s={}))q.call(s,t)&&V(n,t,s[t]);if(I)for(var t of I(s))G.call(s,t)&&V(n,t,s[t]);return n};var p=(n,s,t)=>new Promise((h,m)=>{var D=r=>{try{v(t.next(r))}catch(c){m(c)}},k=r=>{try{v(t.throw(r))}catch(c){m(c)}},v=r=>r.done?h(r.value):Promise.resolve(r.value).then(D,k);v((t=t.apply(n,s)).next())});import{a as H,b as J,d as K,c as W,p as X}from"./dict-Ua4YypUZ.js";import{u as Y,_ as ee}from"./Table.vue_vue_type_script_lang-Dze8ZwxX.js";import{k as ae,d as te,t as w}from"./index-BSaZkSQ-.js";/* empty css                  *//* empty css               */import{_ as le}from"./Search.vue_vue_type_script_setup_true_lang-D_ZuBLEj.js";import{_ as se}from"./ContentWrap.vue_vue_type_script_setup_true_lang-Bhi8rX8m.js";import{_ as ie}from"./Write.vue_vue_type_script_setup_true_lang-D6jb6F5i.js";import{_ as oe}from"./Dialog.vue_vue_type_style_index_0_lang-CkZ5gdNT.js";import{Q as ne,p as re,j as de}from"./element-plus-BkD8NzPH.js";import{l as ue,Z as P,U as i,F as C,S as b,a as d,b as ce,m as fe,p as pe,O as u,u as a,B as U,T as E}from"./vue-chunks-o2h5QaLn.js";const Se=ue({__name:"DictDetail",props:{dictTypeId:ae.number.def(void 0)},setup(n){const s=n,{t}=te(),{tableRegister:h,tableState:m,tableMethods:D}=Y({fetchDataApi:()=>p(this,null,function*(){const{pageSize:l,currentPage:e}=m,o=yield J($({page:a(e),limit:a(l),dict_type_id:s.dictTypeId},a(L)));return{list:o.data||[],total:o.count||0}}),fetchDelApi:l=>p(this,null,function*(){return(yield K(l)).code===200})}),{dataList:k,loading:v,total:r,pageSize:c,currentPage:y}=m,{getList:g,delList:F}=D,B=P([{field:"id",label:"字典编号",show:!1,disabled:!1},{field:"label",label:"字典标签",show:!0,disabled:!0},{field:"value",label:"字典键值",show:!0},{field:"order",label:"字典排序",show:!0},{field:"disabled",label:"是否禁用",show:!0,slots:{default:l=>{const e=l.row;return i(C,null,[i(ne,{modelValue:!e.disabled,disabled:!0},null)])}}},{field:"remark",label:"备注",show:!1},{field:"create_datetime",label:"创建时间",show:!1},{field:"action",width:"120px",label:"操作",show:!0,slots:{default:l=>{const e=l.row;return i(C,null,[i(w,{type:"primary",link:!0,size:"small",onClick:()=>M(e)},{default:()=>[b("编辑")]}),i(w,{type:"danger",loading:R.value,link:!0,size:"small",onClick:()=>j(e)},{default:()=>[b("删除")]})])}}}]),N=P([{field:"label",label:"字典标签",component:"Input",componentProps:{clearable:!1}}]),L=d({}),x=l=>{y.value=1,L.value=l,g()},R=d(!1),j=l=>p(this,null,function*(){R.value=!0,yield F(!0,[l.id]).finally(()=>{R.value=!1})}),f=d(!1),A=d(""),S=d(),_=d(""),z=d(),T=d(!1),M=l=>p(this,null,function*(){const e=yield H(l.id);e&&(A.value="编辑字段元素",_.value="edit",S.value=e.data,f.value=!0)}),O=()=>{A.value="新增字段元素",_.value="add",S.value=void 0,f.value=!0},Q=()=>p(this,null,function*(){const l=a(z),e=yield l==null?void 0:l.submit();if(e){T.value=!0;try{const o=d({});_.value==="add"?(o.value=yield W(e),o.value&&(f.value=!1,g())):_.value==="edit"&&(o.value=yield X(e),o.value&&(f.value=!1,g()))}finally{T.value=!1}}});return ce(()=>s.dictTypeId,()=>{g()},{deep:!0}),(l,e)=>(fe(),pe(C,null,[i(a(se),null,{default:u(()=>[i(a(le),{schema:N,onReset:x,onSearch:x},null,8,["schema"]),i(a(ee),{"current-page":a(y),"onUpdate:currentPage":e[0]||(e[0]=o=>U(y)?y.value=o:null),"page-size":a(c),"onUpdate:pageSize":e[1]||(e[1]=o=>U(c)?c.value=o:null),showAction:"",activeUID:"detail",columns:B,"default-expand-all":"","node-key":"id",data:a(k),loading:a(v),pagination:{total:a(r)},onRegister:a(h),onRefresh:a(g)},{toolbar:u(()=>[i(a(re),{gutter:10},{default:u(()=>[i(a(de),{span:1.5},{default:u(()=>[i(a(w),{type:"primary",onClick:O},{default:u(()=>[b("新增字典元素")]),_:1})]),_:1})]),_:1})]),_:1},8,["current-page","page-size","columns","data","loading","pagination","onRegister","onRefresh"])]),_:1}),i(a(oe),{modelValue:f.value,"onUpdate:modelValue":e[3]||(e[3]=o=>f.value=o),title:A.value,height:650},{footer:u(()=>[i(a(w),{type:"primary",loading:T.value,onClick:Q},{default:u(()=>[b(E(a(t)("exampleDemo.save")),1)]),_:1},8,["loading"]),i(a(w),{onClick:e[2]||(e[2]=o=>f.value=!1)},{default:u(()=>[b(E(a(t)("dialogDemo.close")),1)]),_:1})]),default:u(()=>[i(ie,{ref_key:"writeRef",ref:z,"current-row":S.value,"dict-type-id":n.dictTypeId},null,8,["current-row","dict-type-id"])]),_:1},8,["modelValue","title"])],64))}});export{Se as _};
