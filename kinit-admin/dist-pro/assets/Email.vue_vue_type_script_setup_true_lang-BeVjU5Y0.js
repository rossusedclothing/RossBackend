var f=(p,s,t)=>new Promise((c,l)=>{var m=e=>{try{r(t.next(e))}catch(o){l(o)}},u=e=>{try{r(t.throw(e))}catch(o){l(o)}},r=e=>e.done?c(e.value):Promise.resolve(e.value).then(m,u);r((t=t.apply(p,s)).next())});import{u as x,F as I}from"./useForm-BREZWcm3.js";import{k as S,t as D,a4 as E,N as F}from"./index-BSaZkSQ-.js";import{u as V}from"./useValidator-B2HgF5Uc.js";import{b as g}from"./element-plus-BkD8NzPH.js";import{l as k,Z as v,U as w,S as A,F as B,a as y,m as C,M,u as b}from"./vue-chunks-o2h5QaLn.js";const j=k({__name:"Email",props:{tabId:S.number},setup(p){const{required:s}=V(),t=p,c=v([{field:"email_access",label:"邮箱账号",colProps:{span:24},component:"Input",componentProps:{style:{width:"500px"}}},{field:"email_password",label:"邮箱密码",colProps:{span:24},component:"Input",componentProps:{style:{width:"500px"}}},{field:"email_server",label:"邮箱服务器",colProps:{span:24},component:"Input",componentProps:{style:{width:"500px"}}},{field:"email_port",label:"服务器端口",colProps:{span:24},component:"Input",componentProps:{style:{width:"500px"}}},{field:"active",label:"",colProps:{span:24},formItemProps:{slots:{default:()=>w(B,null,[w(D,{loading:i.value,type:"primary",onClick:h},{default:()=>[A("立即提交")]})])}}}]),l=v({email_access:[s()],email_password:[s()],email_port:[s()],email_server:[s()]}),{formRegister:m,formMethods:u}=x(),{setValues:r,getFormData:e,getElFormExpose:o}=u;let P=y({});const d=()=>f(this,null,function*(){const a=yield F({tab_id:t.tabId});if(a){yield r(a.data),P.value=a.data;const n=yield o();n==null||n.clearValidate()}}),i=y(!1),h=()=>f(this,null,function*(){const a=yield o();if(yield a==null?void 0:a.validate()){const _=yield e();if(i.value=!0,!_)return i.value=!1,g.error("未获取到数据");try{if(yield E(_))return d(),g.success("更新成功")}finally{i.value=!1}}});return d(),(a,n)=>(C(),M(b(I),{rules:l,onRegister:b(m),schema:c},null,8,["rules","onRegister","schema"]))}});export{j as _};
