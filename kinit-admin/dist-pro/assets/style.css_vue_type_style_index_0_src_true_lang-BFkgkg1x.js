var f=(r,h,i)=>new Promise((b,c)=>{var n=a=>{try{s(i.next(a))}catch(u){c(u)}},p=a=>{try{s(i.throw(a))}catch(u){c(u)}},s=a=>a.done?b(a.value):Promise.resolve(a.value).then(n,p);s((i=i.apply(r,h)).next())});import{z as O,T,E as x}from"./wang-editor-K_dPeC8b.js";import{r as S,k as v,F as z,G as B}from"./index-SAHUQZ2g.js";import{b as t}from"./element-plus-C0vem28W.js";import{f as F,e as y,u as l,s as N,a as M,b as C,m as U,h as $,i as A,M as I,A as D,n as G}from"./vue-chunks-wbK7PffK.js";const R=r=>S.post({url:"/vadmin/system/upload/image/to/oss",headersType:"multipart/form-data",data:r}),_=r=>S.post({url:"/vadmin/system/upload/video/to/oss",headersType:"multipart/form-data",data:r}),j={class:"border-1 border-solid border-[var(--el-border-color)] z-10"},Q=F({__name:"Editor",props:{editorId:v.string.def("wangeEditor-1"),height:v.oneOfType([Number,String]).def("500px"),editorConfig:{type:Object,default:()=>{}},modelValue:v.string.def("")},emits:["change","update:modelValue"],setup(r,{expose:h,emit:i}){const b=z(),c=y(()=>b.getCurrentLocale);O(l(c).lang);const n=r,p=i,s=N(),a=M("");C(()=>n.modelValue,o=>{o!==l(a)&&(a.value=o)},{immediate:!0}),C(()=>a.value,o=>{p("update:modelValue",o)});const u=o=>{s.value=o},V=y(()=>Object.assign({readOnly:!1,customAlert:(e,m)=>{switch(m){case"success":t.success(e);break;case"info":t.info(e);break;case"warning":t.warning(e);break;case"error":t.error(e);break;default:t.info(e);break}},autoFocus:!1,scroll:!0,uploadImgShowBase64:!0,MENU_CONF:{uploadImage:{customUpload(e,m){return f(this,null,function*(){if(!["image/jpeg","image/gif","image/png"].includes(e.type))return t.error(`${e.name}上传失败：上传图片只能是 JPG/GIF/PNG/ 格式!`);if(!(e.size/1024/1024<2))return t.error(`${e.name}上传失败：上传图片大小不能超过 2MB!`);const d=new FormData;d.append("file",e),d.append("path","editor/image");const g=yield R(d);m(g.data,"",g.data)})}},uploadVideo:{customUpload(e,m){return f(this,null,function*(){if(!["video/mp4","video/mpeg"].includes(e.type))return t.error(`${e.name}上传失败：上传视频只能是 mp4/mpeg/ 格式!`);if(!(e.size/1024/1024<5))return t.error(`${e.name}上传失败：上传视频大小不能超过 5MB!`);const d=new FormData;d.append("file",e),d.append("path","editor/video");const g=yield _(d);m(g.data,"")})}}}},n.editorConfig||{})),k=y(()=>({height:B(n.height)?`${n.height}px`:n.height})),E=o=>{p("change",o)};return U(()=>{const o=l(s.value);o==null||o.destroy()}),h({getEditorRef:()=>f(this,null,function*(){return yield G(),l(s.value)})}),(o,w)=>($(),A("div",j,[I(l(T),{editor:s.value,editorId:r.editorId,class:"border-0 b-b-1 border-solid border-[var(--el-border-color)]"},null,8,["editor","editorId"]),I(l(x),{modelValue:a.value,"onUpdate:modelValue":w[0]||(w[0]=e=>a.value=e),editorId:r.editorId,defaultConfig:V.value,style:D(k.value),onOnChange:E,onOnCreated:u},null,8,["modelValue","editorId","defaultConfig","style"])]))}});export{Q as _};
