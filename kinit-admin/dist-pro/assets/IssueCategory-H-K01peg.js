var G=Object.defineProperty;var V=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var z=(n,s,o)=>s in n?G(n,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[s]=o,$=(n,s)=>{for(var o in s||(s={}))H.call(s,o)&&z(n,o,s[o]);if(V)for(var o of V(s))K.call(s,o)&&z(n,o,s[o]);return n};var d=(n,s,o)=>new Promise((_,w)=>{var C=r=>{try{f(o.next(r))}catch(m){w(m)}},S=r=>{try{f(o.throw(r))}catch(m){w(m)}},f=r=>r.done?_(r.value):Promise.resolve(r.value).then(C,S);f((o=o.apply(n,s)).next())});import{e as Q,f as J,h as W,i as X,j as Y}from"./issue-jfqE-GDT.js";import{u as Z,_ as ee}from"./Table.vue_vue_type_script_lang-C8htGDV6.js";import{d as te,v}from"./index-SAHUQZ2g.js";/* empty css                  *//* empty css               */import{_ as ae}from"./Search.vue_vue_type_script_setup_true_lang-DSCbi6Eq.js";import{_ as oe}from"./ContentWrap.vue_vue_type_script_setup_true_lang-Bq-Mkqar.js";import{_ as le}from"./Write.vue_vue_type_script_setup_true_lang-CUKuoehB.js";import{_ as se}from"./Dialog.vue_vue_type_style_index_0_lang-Bhm9ynpg.js";import{u as ie}from"./dict-D8O779xT.js";import{s as re}from"./dict-DJyIMlYA.js";import{V as ne,p as ue,j as pe}from"./element-plus-C0vem28W.js";import{f as me,a as u,Q as O,M as l,F as h,K as g,h as ce,i as de,G as p,u as t,q as E,L as F}from"./vue-chunks-wbK7PffK.js";/* empty css                       *//* empty css                 *//* empty css                   *//* empty css                        *//* empty css                    */import"./el-tooltip-l0sNRNKZ.js";/* empty css                  *//* empty css               *//* empty css                      *//* empty css                  *//* empty css                        *//* empty css                */import"./useForm-B5RQKQQi.js";/* empty css                     *//* empty css                 *//* empty css                          *//* empty css                       *//* empty css                       *//* empty css                   *//* empty css                *//* empty css                    */import"./style.css_vue_type_style_index_0_src_true_lang-BFkgkg1x.js";import"./wang-editor-K_dPeC8b.js";/* empty css                   *//* empty css                    *//* empty css                         */import"./_Uint8Array-DZlgfqcV.js";import"./useIcon-DF_xcSd1.js";import"./useValidator-UROf_CnT.js";/* empty css                  */import"./dict-D1Ddn9_W.js";const it=me({name:"HelpIssueCategory",__name:"IssueCategory",setup(n){const{t:s}=te(),{tableRegister:o,tableState:_,tableMethods:w}=Z({fetchDataApi:()=>d(this,null,function*(){const{pageSize:a,currentPage:e}=_,i=yield J($({page:t(e),limit:t(a)},t(I)));return{list:i.data||[],total:i.count||0}}),fetchDelApi:a=>d(this,null,function*(){return(yield W(a)).code===200})}),{dataList:C,loading:S,total:f,pageSize:r,currentPage:m}=_,{getList:y,delList:T}=w,D=u([]);d(this,null,function*(){const e=yield ie().getDictObj(["sys_vadmin_platform"]);D.value=e.sys_vadmin_platform});const j=O([{field:"id",label:"编号",show:!0,disabled:!0},{field:"name",label:"类别名称",show:!0,disabled:!0},{field:"platform",label:"展示平台",show:!0,slots:{default:a=>{const e=a.row;return l(h,null,[l("div",null,[re(D.value,e.platform)])])}}},{field:"is_active",label:"是否可见",show:!0,slots:{default:a=>{const e=a.row;return l(h,null,[l(ne,{modelValue:e.is_active,disabled:!0},null)])}}},{field:"create_datetime",label:"创建时间",show:!0,sortable:!0},{field:"create_user.name",label:"创建人",show:!0},{field:"action",width:"120px",label:"操作",show:!0,slots:{default:a=>{const e=a.row;return l(h,null,[l(v,{type:"primary",link:!0,size:"small",onClick:()=>M(e)},{default:()=>[g("编辑")]}),l(v,{type:"danger",loading:k.value,link:!0,size:"small",onClick:()=>B(e)},{default:()=>[g("删除")]})])}}}]),U=O([{field:"name",label:"类别名称",component:"Input",componentProps:{clearable:!0,style:{width:"214px"}}},{field:"platform",label:"登录平台",component:"Select",componentProps:{style:{width:"214px"},options:[]}},{field:"is_active",label:"是否可见",component:"Select",componentProps:{style:{width:"214px"},options:[{label:"可见",value:!0},{label:"不可见",value:!1}]}}]),I=u({}),L=a=>{m.value=1,I.value=a,y()},k=u(!1),B=a=>d(this,null,function*(){k.value=!0,yield T(!0,[a.id]).finally(()=>{k.value=!1})}),c=u(!1),R=u(""),x=u(),b=u(""),P=u(),A=u(!1),M=a=>d(this,null,function*(){const e=yield Q(a.id);e&&(R.value="编辑常见问题类别",b.value="edit",x.value=e.data,c.value=!0)}),N=()=>{R.value="新增常见问题类别",b.value="add",x.value=void 0,c.value=!0},q=()=>d(this,null,function*(){const a=t(P),e=yield a==null?void 0:a.submit();if(e){A.value=!0;try{const i=u({});b.value==="add"?(i.value=yield X(e),i.value&&(c.value=!1,y())):b.value==="edit"&&(i.value=yield Y(e),i.value&&(c.value=!1,y()))}finally{A.value=!1}}});return(a,e)=>(ce(),de(h,null,[l(t(oe),null,{default:p(()=>[l(t(ae),{schema:U,onReset:L,onSearch:L},null,8,["schema"]),l(t(ee),{"current-page":t(m),"onUpdate:currentPage":e[0]||(e[0]=i=>E(m)?m.value=i:null),"page-size":t(r),"onUpdate:pageSize":e[1]||(e[1]=i=>E(r)?r.value=i:null),showAction:"",columns:j,"default-expand-all":"","node-key":"id",data:t(C),loading:t(S),pagination:{total:t(f)},onRegister:t(o),onRefresh:t(y)},{toolbar:p(()=>[l(t(ue),{gutter:10},{default:p(()=>[l(t(pe),{span:1.5},{default:p(()=>[l(t(v),{type:"primary",onClick:N},{default:p(()=>[g("新增常见问题类别")]),_:1})]),_:1})]),_:1})]),_:1},8,["current-page","page-size","columns","data","loading","pagination","onRegister","onRefresh"])]),_:1}),l(t(se),{modelValue:c.value,"onUpdate:modelValue":e[3]||(e[3]=i=>c.value=i),title:R.value,height:650},{footer:p(()=>[l(t(v),{type:"primary",loading:A.value,onClick:q},{default:p(()=>[g(F(t(s)("exampleDemo.save")),1)]),_:1},8,["loading"]),l(t(v),{onClick:e[2]||(e[2]=i=>c.value=!1)},{default:p(()=>[g(F(t(s)("dialogDemo.close")),1)]),_:1})]),default:p(()=>[l(le,{ref_key:"writeRef",ref:P,"current-row":x.value},null,8,["current-row"])]),_:1},8,["modelValue","title"])],64))}});export{it as default};
