var te=Object.defineProperty,le=Object.defineProperties;var oe=Object.getOwnPropertyDescriptors;var $=Object.getOwnPropertySymbols;var ae=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable;var D=(i,u,r)=>u in i?te(i,u,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[u]=r,A=(i,u)=>{for(var r in u||(u={}))ae.call(u,r)&&D(i,r,u[r]);if($)for(var r of $(u))se.call(u,r)&&D(i,r,u[r]);return i},E=(i,u)=>le(i,oe(u));var F=(i,u,r)=>new Promise((x,b)=>{var y=f=>{try{V(r.next(f))}catch(U){b(U)}},B=f=>{try{V(r.throw(f))}catch(U){b(U)}},V=f=>f.done?x(f.value):Promise.resolve(f.value).then(y,B);V((r=r.apply(i,u)).next())});import{l as re,aB as ne,a as C,e as ie,Z as ue,d as de,ai as d,m as L,p as O,q as s,U as e,O as t,S as _,T as me,u as z,a2 as j,R as ce,aH as pe,aI as _e}from"./vue-chunks-o2h5QaLn.js";import{q as fe,_ as ge}from"./index-BSaZkSQ-.js";/* empty css                       *//* empty css                 *//* empty css                   */import{b as v,x as H,y as Q,z as be,A as ve,w as he}from"./element-plus-BkD8NzPH.js";import{c as xe}from"./list-D54TcLRK.js";const h=i=>(pe("data-v-e4048fe7"),i=i(),_e(),i),ye={class:"page-wrapper"},Ve={class:"public-form-container"},we={class:"public-form-container"},ke=h(()=>s("div",{class:"form-header"},[s("div",{class:"header-content"},[s("h1",{class:"form-title"},"客户信息登记表"),s("p",{class:"form-description"},"欢迎填写客户信息，我们将尽快与您联系")])],-1)),ze={class:"form-content"},Ue=h(()=>s("span",{class:"section-title"},"基本信息",-1)),qe=h(()=>s("span",{class:"section-title"},"业务信息",-1)),Ce=h(()=>s("span",{class:"section-title"},"外贸信息",-1)),Be=h(()=>s("span",{class:"section-title"},"学员信息",-1)),Se={class:"submit-section"},Fe={class:"form-footer"},Ne={class:"footer-content"},Pe=h(()=>s("p",null,[_(" 如有问题，请点击联系我们："),s("a",{href:"mailto:2457676371@qq.com?subject=问题反馈&body=您好，我遇到的问题是：",style:{color:"#1890ff","text-decoration":"underline",cursor:"pointer"}},"发邮件")],-1)),Re={class:"footer-links",style:{display:"none"}},Te={key:0,class:"share-menu"},Ie={class:"success-content"},Me=h(()=>s("p",{class:"success-message"},"感谢您的提交！我们会在24小时内与您联系。",-1)),$e=re({__name:"BusinessPublicForm",setup(i){const u=ne(),r=C(!1),x=C(),b=C(!1),y=C(!1),B=fe(),V=ie(()=>B.user),f=()=>{var l;const n=`${window.location.origin}/businessform/publicform2`;return(l=V.value)!=null&&l.id?`${n}?bt=${V.value.id}`:n},U=()=>new URLSearchParams(window.location.search).get("bt"),N=n=>{if(!n)return!1;const l=Number(n);return!(isNaN(l)||!Number.isInteger(l)||l<=0)},o=ue({name:"",position:"",region:"",factory_spec:"",product:"",website:"",has_export_experience:!1,export_market:"",student_identity:"",num_members_tradeteam:0,company_size:"",bt:""}),W={name:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:2,max:50,message:"姓名长度在 2 到 50 个字符",trigger:"blur"}],position:[{required:!1,message:"请输入职位",trigger:"blur"},{max:50,message:"职位长度不能超过 50 个字符",trigger:"blur"}],region:[{required:!0,message:"请输入地区",trigger:"blur"},{max:100,message:"地区长度不能超过 100 个字符",trigger:"blur"}],factory_spec:[{required:!1,message:"请输入工厂规格",trigger:"blur"},{max:200,message:"工厂规格长度不能超过 200 个字符",trigger:"blur"}],product:[{required:!0,message:"请输入主营产品",trigger:"blur"},{max:100,message:"产品名称长度不能超过 100 个字符",trigger:"blur"}],website:[{required:!1,message:"请输入网站链接",trigger:"blur"},{max:200,message:"网站链接长度不能超过 200 个字符",trigger:"blur"}],export_market:[{required:!1,message:"请输入出口市场",trigger:"blur"},{max:200,message:"出口市场描述长度不能超过 200 个字符",trigger:"blur"}],student_identity:[{required:!1,message:"请选择学员身份",trigger:"change"}],company_size:[{required:!1,message:"请选择公司规模",trigger:"change"}]};de(()=>{document.title="客户信息登记表";const n=U();n&&(N(n)?o.bt=n:(v.error("分享链接参数错误，请联系分享人获取正确的链接"),console.error("无效的bt参数:",n)))});const Z=()=>F(this,null,function*(){var n,l;if(x.value)try{if(!(yield x.value.validate()))return;if(o.bt&&!N(o.bt)){v.error("分享链接参数错误，请联系分享人获取正确的链接");return}b.value=!0;const g=E(A({},o),{bt:o.bt||null}),m=yield xe(g);m.code===200?y.value=!0:v.error(m.message||"提交失败，请重试")}catch(c){console.error("提交失败:",c),(l=(n=c.response)==null?void 0:n.data)!=null&&l.detail?v.error(`提交失败: ${c.response.data.detail}`):v.error("网络错误，请检查网络连接后重试")}finally{b.value=!1}}),P=()=>{he.confirm("确定要清空所有已填写的内容吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{var l;const n=o.bt;(l=x.value)==null||l.resetFields(),o.num_members_tradeteam=0,o.has_export_experience=!1,v.success("表单已重置"),o.bt=n})},G=()=>{y.value=!1,P(),window.scrollTo({top:0,behavior:"smooth"})},R=()=>{u.push("/businessform/qrcode")},T=()=>F(this,null,function*(){let n=f();try{yield navigator.clipboard.writeText(n),v.success("表单链接已复制到剪贴板")}catch(l){v.error("复制失败，请手动复制链接")}});return(n,l)=>{const c=d("el-divider"),g=d("el-input"),m=d("el-form-item"),w=d("el-col"),S=d("el-row"),p=d("el-option"),I=d("el-select"),M=d("el-radio"),J=d("el-radio-group"),K=d("el-input-number"),X=d("el-form"),q=d("el-button"),Y=d("el-card"),k=d("el-icon"),ee=d("el-dialog");return L(),O("div",ye,[s("div",Ve,[s("div",we,[ke,s("div",ze,[e(Y,{class:"form-card",shadow:"hover"},{default:t(()=>[e(X,{ref_key:"formRef",ref:x,model:o,rules:W,"label-width":"120px","label-position":"left"},{default:t(()=>[e(c,{"content-position":"left"},{default:t(()=>[Ue]),_:1}),e(S,{gutter:20},{default:t(()=>[e(w,{xs:24,sm:12},{default:t(()=>[e(m,{label:"姓名",prop:"name"},{default:t(()=>[e(g,{modelValue:o.name,"onUpdate:modelValue":l[0]||(l[0]=a=>o.name=a),placeholder:"请输入您的姓名",maxlength:"50",size:"large"},null,8,["modelValue"])]),_:1})]),_:1}),e(w,{xs:24,sm:12},{default:t(()=>[e(m,{label:"职位",prop:"position"},{default:t(()=>[e(g,{modelValue:o.position,"onUpdate:modelValue":l[1]||(l[1]=a=>o.position=a),placeholder:"请输入您的职位",maxlength:"50",size:"large"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(S,{gutter:20},{default:t(()=>[e(w,{xs:24,sm:12},{default:t(()=>[e(m,{label:"地区",prop:"region"},{default:t(()=>[e(g,{modelValue:o.region,"onUpdate:modelValue":l[2]||(l[2]=a=>o.region=a),placeholder:"请输入所在地区",maxlength:"100",size:"large"},null,8,["modelValue"])]),_:1})]),_:1}),e(w,{xs:24,sm:12},{default:t(()=>[e(m,{label:"公司规模",prop:"company_size"},{default:t(()=>[e(I,{modelValue:o.company_size,"onUpdate:modelValue":l[3]||(l[3]=a=>o.company_size=a),placeholder:"请选择公司规模",size:"large",style:{width:"100%"}},{default:t(()=>[e(p,{label:"1-10人",value:"1-10人"}),e(p,{label:"11-50人",value:"11-50人"}),e(p,{label:"51-200人",value:"51-200人"}),e(p,{label:"201-500人",value:"201-500人"}),e(p,{label:"500人以上",value:"500人以上"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(c,{"content-position":"left"},{default:t(()=>[qe]),_:1}),e(m,{label:"工厂规格",prop:"factory_spec"},{default:t(()=>[e(g,{modelValue:o.factory_spec,"onUpdate:modelValue":l[4]||(l[4]=a=>o.factory_spec=a),placeholder:"请描述工厂规模、设备等情况",type:"textarea",rows:3,maxlength:"200","show-word-limit":""},null,8,["modelValue"])]),_:1}),e(m,{label:"主营产品",prop:"product"},{default:t(()=>[e(g,{modelValue:o.product,"onUpdate:modelValue":l[5]||(l[5]=a=>o.product=a),placeholder:"请输入公司主营产品",maxlength:"100",size:"large"},null,8,["modelValue"])]),_:1}),e(m,{label:"网站链接"},{default:t(()=>[e(g,{modelValue:o.website,"onUpdate:modelValue":l[6]||(l[6]=a=>o.website=a),placeholder:"请输入公司官网或产品链接（可选）",maxlength:"200",size:"large"},null,8,["modelValue"])]),_:1}),e(c,{"content-position":"left"},{default:t(()=>[Ce]),_:1}),e(S,{gutter:20},{default:t(()=>[e(w,{xs:24,sm:12},{default:t(()=>[e(m,{label:"外贸经验",prop:"has_export_experience"},{default:t(()=>[e(J,{modelValue:o.has_export_experience,"onUpdate:modelValue":l[7]||(l[7]=a=>o.has_export_experience=a),size:"large"},{default:t(()=>[e(M,{label:!0},{default:t(()=>[_("有外贸经验")]),_:1}),e(M,{label:!1},{default:t(()=>[_("无外贸经验")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(w,{xs:24,sm:12},{default:t(()=>[e(m,{label:"外贸团队人数",prop:"num_members_tradeteam"},{default:t(()=>[e(K,{modelValue:o.num_members_tradeteam,"onUpdate:modelValue":l[8]||(l[8]=a=>o.num_members_tradeteam=a),min:0,max:1e3,placeholder:"0",size:"large","controls-position":"right",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(m,{label:"产品出口市场",prop:"export_market"},{default:t(()=>[e(g,{modelValue:o.export_market,"onUpdate:modelValue":l[9]||(l[9]=a=>o.export_market=a),placeholder:"请输入产品主要出口的国家或地区",type:"textarea",rows:3,maxlength:"200","show-word-limit":""},null,8,["modelValue"])]),_:1}),e(c,{"content-position":"left"},{default:t(()=>[Be]),_:1}),e(m,{label:"学员身份",prop:"student_identity"},{default:t(()=>[e(I,{modelValue:o.student_identity,"onUpdate:modelValue":l[10]||(l[10]=a=>o.student_identity=a),placeholder:"请选择学员身份",size:"large",style:{width:"100%"}},{default:t(()=>[e(p,{label:"新学员",value:"新学员"}),e(p,{label:"在读学员",value:"在读学员"}),e(p,{label:"毕业学员",value:"毕业学员"}),e(p,{label:"意向学员",value:"意向学员"}),e(p,{label:"其他",value:"其他"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"]),s("div",Se,[e(q,{type:"primary",onClick:Z,loading:b.value,size:"large",class:"submit-btn"},{default:t(()=>[_(me(b.value?"提交中...":"立即提交"),1)]),_:1},8,["loading"]),e(q,{onClick:P,disabled:b.value,size:"large",class:"reset-btn"},{default:t(()=>[_(" 重新填写 ")]),_:1},8,["disabled"])])]),_:1})]),s("div",Fe,[s("div",Ne,[Pe,s("div",Re,[e(q,{link:"",type:"primary",onClick:R,class:"qrcode-link"},{default:t(()=>[e(k,null,{default:t(()=>[e(z(H))]),_:1}),_(" 生成分享二维码 ")]),_:1}),e(c,{direction:"vertical"}),e(q,{link:"",type:"info",onClick:T},{default:t(()=>[e(k,null,{default:t(()=>[e(z(Q))]),_:1}),_(" 复制表单链接 ")]),_:1})])])]),s("div",{class:"floating-share-btn",onClick:l[11]||(l[11]=a=>r.value=!r.value),style:{display:"none"}},[e(k,{size:"20"},{default:t(()=>[e(z(H))]),_:1}),r.value?(L(),O("div",Te,[s("div",{class:"share-item",onClick:j(R,["stop"]),style:{color:"black"}},[e(k,null,{default:t(()=>[e(z(be))]),_:1}),_(" 生成二维码 ")]),s("div",{class:"share-item",onClick:j(T,["stop"]),style:{color:"black"}},[e(k,null,{default:t(()=>[e(z(Q))]),_:1}),_(" 复制链接 ")])])):ce("",!0)]),e(ee,{modelValue:y.value,"onUpdate:modelValue":l[12]||(l[12]=a=>y.value=a),title:"提交成功",width:"400px","show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1},{footer:t(()=>[e(q,{type:"primary",onClick:G,size:"large"},{default:t(()=>[_(" 继续填写新表单 ")]),_:1})]),default:t(()=>[s("div",Ie,[e(k,{color:"#67C23A",size:"48"},{default:t(()=>[e(z(ve))]),_:1}),Me])]),_:1},8,["modelValue"])])])])}}}),We=ge($e,[["__scopeId","data-v-e4048fe7"]]);export{We as default};
