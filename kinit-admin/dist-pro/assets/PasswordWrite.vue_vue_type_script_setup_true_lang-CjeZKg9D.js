var u=(m,t,s)=>new Promise((l,n)=>{var i=e=>{try{a(s.next(e))}catch(o){n(o)}},c=e=>{try{a(s.throw(e))}catch(o){n(o)}},a=e=>e.done?l(e.value):Promise.resolve(e.value).then(i,c);a((s=s.apply(m,t)).next())});import{u as v,F as P}from"./useForm-BREZWcm3.js";import{u as b}from"./useValidator-B2HgF5Uc.js";import{u as k,t as y,p as x}from"./index-BSaZkSQ-.js";import{b as f}from"./element-plus-BkD8NzPH.js";import{l as F,Z as D,a as R,m as S,M as U,u as g,U as p,S as V,F as B}from"./vue-chunks-o2h5QaLn.js";const T=F({__name:"PasswordWrite",setup(m){const{required:t}=b(),s=k(),l=D([{field:"title",colProps:{span:24}},{field:"password",label:"新密码",component:"InputPassword",colProps:{span:24},componentProps:{style:{width:"50%"},placeholder:"请输入新密码"}},{field:"password_two",label:"确认密码",component:"InputPassword",colProps:{span:24},componentProps:{style:{width:"50%"},placeholder:"请再次输入新密码"}},{field:"save",colProps:{span:24},formItemProps:{slots:{default:()=>p(B,null,[p("div",{class:"w-[50%]"},[p(y,{loading:d.value,type:"primary",class:"w-[100%]",onClick:w},{default:()=>[V("保存")]})])])}}}]),n={password:[t(),{min:8,max:16,message:"长度需为8-16个字符,请重新输入。",trigger:"blur"}],password_two:[t(),{min:8,max:16,message:"长度需为8-16个字符,请重新输入。",trigger:"blur"}]},{formRegister:i,formMethods:c}=v(),{setValues:a,getFormData:e,getElFormExpose:o}=c;a(s.getUser);const d=R(!1),w=()=>u(this,null,function*(){if(s.getUser.id===1)return f.warning("编辑账号为演示账号，无权限操作！");const r=yield o();if(yield r==null?void 0:r.validate()){d.value=!0;const h=yield e();try{(yield x(h))&&(r==null||r.resetFields(),s.logout(),f.warning("请重新登录"))}finally{d.value=!1}}});return(r,_)=>(S(),U(g(P),{onRegister:g(i),schema:l,rules:n,"hide-required-asterisk":"",class:"dark:border-1 dark:border-[var(--el-border-color)] dark:border-solid"},null,8,["onRegister","schema"]))}});export{T as _};
