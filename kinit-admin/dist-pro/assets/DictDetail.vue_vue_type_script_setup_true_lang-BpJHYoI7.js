var K=Object.defineProperty;var z=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var I=(n,s,t)=>s in n?K(n,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[s]=t,$=(n,s)=>{for(var t in s||(s={}))Q.call(s,t)&&I(n,t,s[t]);if(z)for(var t of z(s))H.call(s,t)&&I(n,t,s[t]);return n};var p=(n,s,t)=>new Promise((h,m)=>{var D=r=>{try{v(t.next(r))}catch(c){m(c)}},k=r=>{try{v(t.throw(r))}catch(c){m(c)}},v=r=>r.done?h(r.value):Promise.resolve(r.value).then(D,k);v((t=t.apply(n,s)).next())});import{a as J,b as O,d as W,c as X,p as Y}from"./dict-D1Ddn9_W.js";import{u as Z,_ as ee}from"./Table.vue_vue_type_script_lang-C8htGDV6.js";import{k as ae,d as te,v as w}from"./index-SAHUQZ2g.js";/* empty css                  *//* empty css               */import{_ as le}from"./Search.vue_vue_type_script_setup_true_lang-DSCbi6Eq.js";import{_ as se}from"./ContentWrap.vue_vue_type_script_setup_true_lang-Bq-Mkqar.js";import{_ as ie}from"./Write.vue_vue_type_script_setup_true_lang-BlUTeq8S.js";import{_ as oe}from"./Dialog.vue_vue_type_style_index_0_lang-Bhm9ynpg.js";import{V as ne,p as re,j as de}from"./element-plus-C0vem28W.js";import{f as ue,Q as P,M as i,F as S,K as b,a as d,b as ce,h as fe,i as pe,G as u,u as a,q as E,L as F}from"./vue-chunks-wbK7PffK.js";const Le=ue({__name:"DictDetail",props:{dictTypeId:ae.number.def(void 0)},setup(n){const s=n,{t}=te(),{tableRegister:h,tableState:m,tableMethods:D}=Z({fetchDataApi:()=>p(this,null,function*(){const{pageSize:l,currentPage:e}=m,o=yield O($({page:a(e),limit:a(l),dict_type_id:s.dictTypeId},a(T)));return{list:o.data||[],total:o.count||0}}),fetchDelApi:l=>p(this,null,function*(){return(yield W(l)).code===200})}),{dataList:k,loading:v,total:r,pageSize:c,currentPage:y}=m,{getList:g,delList:U}=D,B=P([{field:"id",label:"字典编号",show:!1,disabled:!1},{field:"label",label:"字典标签",show:!0,disabled:!0},{field:"value",label:"字典键值",show:!0},{field:"order",label:"字典排序",show:!0},{field:"disabled",label:"是否禁用",show:!0,slots:{default:l=>{const e=l.row;return i(S,null,[i(ne,{modelValue:!e.disabled,disabled:!0},null)])}}},{field:"remark",label:"备注",show:!1},{field:"create_datetime",label:"创建时间",show:!1},{field:"action",width:"120px",label:"操作",show:!0,slots:{default:l=>{const e=l.row;return i(S,null,[i(w,{type:"primary",link:!0,size:"small",onClick:()=>j(e)},{default:()=>[b("编辑")]}),i(w,{type:"danger",loading:R.value,link:!0,size:"small",onClick:()=>N(e)},{default:()=>[b("删除")]})])}}}]),M=P([{field:"label",label:"字典标签",component:"Input",componentProps:{clearable:!1}}]),T=d({}),V=l=>{y.value=1,T.value=l,g()},R=d(!1),N=l=>p(this,null,function*(){R.value=!0,yield U(!0,[l.id]).finally(()=>{R.value=!1})}),f=d(!1),A=d(""),L=d(),_=d(""),x=d(),C=d(!1),j=l=>p(this,null,function*(){const e=yield J(l.id);e&&(A.value="编辑字段元素",_.value="edit",L.value=e.data,f.value=!0)}),q=()=>{A.value="新增字段元素",_.value="add",L.value=void 0,f.value=!0},G=()=>p(this,null,function*(){const l=a(x),e=yield l==null?void 0:l.submit();if(e){C.value=!0;try{const o=d({});_.value==="add"?(o.value=yield X(e),o.value&&(f.value=!1,g())):_.value==="edit"&&(o.value=yield Y(e),o.value&&(f.value=!1,g()))}finally{C.value=!1}}});return ce(()=>s.dictTypeId,()=>{g()},{deep:!0}),(l,e)=>(fe(),pe(S,null,[i(a(se),null,{default:u(()=>[i(a(le),{schema:M,onReset:V,onSearch:V},null,8,["schema"]),i(a(ee),{"current-page":a(y),"onUpdate:currentPage":e[0]||(e[0]=o=>E(y)?y.value=o:null),"page-size":a(c),"onUpdate:pageSize":e[1]||(e[1]=o=>E(c)?c.value=o:null),showAction:"",activeUID:"detail",columns:B,"default-expand-all":"","node-key":"id",data:a(k),loading:a(v),pagination:{total:a(r)},onRegister:a(h),onRefresh:a(g)},{toolbar:u(()=>[i(a(re),{gutter:10},{default:u(()=>[i(a(de),{span:1.5},{default:u(()=>[i(a(w),{type:"primary",onClick:q},{default:u(()=>[b("新增字典元素")]),_:1})]),_:1})]),_:1})]),_:1},8,["current-page","page-size","columns","data","loading","pagination","onRegister","onRefresh"])]),_:1}),i(a(oe),{modelValue:f.value,"onUpdate:modelValue":e[3]||(e[3]=o=>f.value=o),title:A.value,height:650},{footer:u(()=>[i(a(w),{type:"primary",loading:C.value,onClick:G},{default:u(()=>[b(F(a(t)("exampleDemo.save")),1)]),_:1},8,["loading"]),i(a(w),{onClick:e[2]||(e[2]=o=>f.value=!1)},{default:u(()=>[b(F(a(t)("dialogDemo.close")),1)]),_:1})]),default:u(()=>[i(ie,{ref_key:"writeRef",ref:x,"current-row":L.value,"dict-type-id":n.dictTypeId},null,8,["current-row","dict-type-id"])]),_:1},8,["modelValue","title"])],64))}});export{Le as _};
