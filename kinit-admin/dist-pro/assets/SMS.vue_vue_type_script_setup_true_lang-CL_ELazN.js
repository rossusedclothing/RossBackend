var u=(c,t,a)=>new Promise((m,p)=>{var i=e=>{try{n(a.next(e))}catch(o){p(o)}},d=e=>{try{n(a.throw(e))}catch(o){p(o)}},n=e=>e.done?m(e.value):Promise.resolve(e.value).then(i,d);n((a=a.apply(c,t)).next())});import{u as x,F as I}from"./useForm-BREZWcm3.js";import{k as S,t as k,a4 as A,N as D}from"./index-BSaZkSQ-.js";import{u as F}from"./useValidator-B2HgF5Uc.js";import{b as y}from"./element-plus-BkD8NzPH.js";import{l as V,Z as P,U as g,S as E,F as M,a as v,m as B,M as C,u as w}from"./vue-chunks-o2h5QaLn.js";const $=V({__name:"SMS",props:{tabId:S.number},setup(c){const{required:t}=F(),a=c,m=P([{field:"sms_access_key",label:"AccessKey",colProps:{span:24},component:"Input",componentProps:{style:{width:"500px"}}},{field:"sms_access_key_secret",label:"AccessKeySecret",colProps:{span:24},component:"Input",componentProps:{style:{width:"500px"}}},{field:"sms_sign_name_1",label:"短信验证码签名",colProps:{span:24},component:"Input",componentProps:{style:{width:"500px"}}},{field:"sms_template_code_1",label:"短信验证码模板",colProps:{span:24},component:"Input",componentProps:{style:{width:"500px"}}},{field:"sms_sign_name_2",label:"重置密码签名",colProps:{span:24},component:"Input",componentProps:{style:{width:"500px"}}},{field:"sms_template_code_2",label:"重置密码模板",colProps:{span:24},component:"Input",componentProps:{style:{width:"500px"}}},{field:"sms_send_interval",label:"发送频率",colProps:{span:24},component:"Input",componentProps:{style:{width:"500px"}}},{field:"sms_valid_time",label:"有效时间",colProps:{span:24},component:"Input",componentProps:{style:{width:"500px"}}},{field:"active",label:"",colProps:{span:24},formItemProps:{slots:{default:()=>g(M,null,[g(k,{loading:r.value,type:"primary",onClick:h},{default:()=>[E("立即提交")]})])}}}]),p=P({sms_access_key:[t()],sms_access_key_secret:[t()],sms_send_interval:[t()],sms_valid_time:[t()]}),{formRegister:i,formMethods:d}=x(),{setValues:n,getFormData:e,getElFormExpose:o}=d;let b=v({});const _=()=>u(this,null,function*(){const s=yield D({tab_id:a.tabId});if(s){yield n(s.data),b.value=s.data;const l=yield o();l==null||l.clearValidate()}}),r=v(!1),h=()=>u(this,null,function*(){const s=yield o();if(yield s==null?void 0:s.validate()){const f=yield e();if(r.value=!0,!f)return r.value=!1,y.error("未获取到数据");try{if(yield A(f))return _(),y.success("更新成功")}finally{r.value=!1}}});return _(),(s,l)=>(B(),C(w(I),{rules:p,onRegister:w(i),schema:m},null,8,["rules","onRegister","schema"]))}});export{$ as _};
