var V=Object.defineProperty;var k=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var P=(r,a,t)=>a in r?V(r,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[a]=t,z=(r,a)=>{for(var t in a||(a={}))j.call(a,t)&&P(r,t,a[t]);if(k)for(var t of k(a))B.call(a,t)&&P(r,t,a[t]);return r};var m=(r,a,t)=>new Promise((d,f)=>{var h=s=>{try{u(t.next(s))}catch(n){f(n)}},g=s=>{try{u(t.throw(s))}catch(n){f(n)}},u=s=>s.done?d(s.value):Promise.resolve(s.value).then(h,g);u((t=t.apply(r,a)).next())});import{g as M,d as N}from"./issue-jfqE-GDT.js";import{u as T,_ as U}from"./Table.vue_vue_type_script_lang-C8htGDV6.js";import{v as _}from"./index-SAHUQZ2g.js";/* empty css                  *//* empty css               */import{_ as q}from"./Search.vue_vue_type_script_setup_true_lang-DSCbi6Eq.js";import{_ as G}from"./ContentWrap.vue_vue_type_script_setup_true_lang-Bq-Mkqar.js";import{u as H}from"./dict-D8O779xT.js";import{f as K,ao as Q,a as b,Q as A,M as l,F as C,K as v,h as J,E as W,G as c,u as e,q as L}from"./vue-chunks-wbK7PffK.js";import{V as X,p as Y,j as Z}from"./element-plus-C0vem28W.js";/* empty css                       *//* empty css                 *//* empty css                   *//* empty css                        *//* empty css                    */import"./el-tooltip-l0sNRNKZ.js";/* empty css                  *//* empty css               *//* empty css                      *//* empty css                  *//* empty css                        *//* empty css                */import"./useForm-B5RQKQQi.js";/* empty css                     *//* empty css                 *//* empty css                          *//* empty css                       *//* empty css                       *//* empty css                   *//* empty css                *//* empty css                    */import"./style.css_vue_type_style_index_0_src_true_lang-BFkgkg1x.js";import"./wang-editor-K_dPeC8b.js";/* empty css                   *//* empty css                    *//* empty css                         */import"./_Uint8Array-DZlgfqcV.js";import"./useIcon-DF_xcSd1.js";import"./dict-D1Ddn9_W.js";const Nt=K({name:"HelpIssue",__name:"Issue",setup(r){const{push:a}=Q(),{tableRegister:t,tableState:d,tableMethods:f}=T({fetchDataApi:()=>m(this,null,function*(){const{pageSize:o,currentPage:i}=d,p=yield M(z({page:e(i),limit:e(o)},e(S)));return{list:p.data||[],total:p.count||0}}),fetchDelApi:o=>m(this,null,function*(){return(yield N(o)).code===200})}),{dataList:h,loading:g,total:u,pageSize:s,currentPage:n}=d,{getList:y,delList:D}=f,x=b([]);m(this,null,function*(){const i=yield H().getDictObj(["sys_vadmin_platform"]);x.value=i.sys_vadmin_platform});const I=A([{field:"id",label:"编号",show:!0,disabled:!0,width:"120px"},{field:"category.name",label:"类别名称",width:"200px",show:!0,disabled:!0},{field:"title",label:"标题",show:!0},{field:"view_number",label:"查看次数",show:!0,width:"100px"},{field:"is_active",label:"是否可见",show:!0,width:"100px",slots:{default:o=>{const i=o.row;return l(C,null,[l(X,{modelValue:i.is_active,disabled:!0},null)])}}},{field:"create_datetime",label:"创建时间",show:!0,width:"200px",sortable:!0},{field:"create_user.name",label:"创建人",show:!0,width:"100px"},{field:"action",width:"120px",label:"操作",show:!0,slots:{default:o=>{const i=o.row;return l(C,null,[l(_,{type:"primary",link:!0,size:"small",onClick:()=>E(i)},{default:()=>[v("编辑")]}),l(_,{type:"danger",loading:w.value,link:!0,size:"small",onClick:()=>$(i)},{default:()=>[v("删除")]})])}}}]),O=A([{field:"name",label:"类别名称",component:"Input",componentProps:{clearable:!0,style:{width:"214px"}}},{field:"platform",label:"登录平台",component:"Select",componentProps:{style:{width:"214px"},options:x.value}},{field:"is_active",label:"是否可见",component:"Select",componentProps:{style:{width:"214px"},options:[{label:"可见",value:!0},{label:"不可见",value:!1}]}}]),S=b({}),R=o=>{n.value=1,S.value=o,y()},w=b(!1),$=o=>m(this,null,function*(){w.value=!0,yield D(!0,[o.id]).finally(()=>{w.value=!1})}),E=o=>m(this,null,function*(){a(`/help/issue/form?id=${o.id}`)}),F=()=>{a("/help/issue/form")};return(o,i)=>(J(),W(e(G),null,{default:c(()=>[l(e(q),{schema:O,onReset:R,onSearch:R},null,8,["schema"]),l(e(U),{"current-page":e(n),"onUpdate:currentPage":i[0]||(i[0]=p=>L(n)?n.value=p:null),"page-size":e(s),"onUpdate:pageSize":i[1]||(i[1]=p=>L(s)?s.value=p:null),showAction:"",columns:I,"default-expand-all":"","node-key":"id",data:e(h),loading:e(g),pagination:{total:e(u)},onRegister:e(t),onRefresh:e(y)},{toolbar:c(()=>[l(e(Y),{gutter:10},{default:c(()=>[l(e(Z),{span:1.5},{default:c(()=>[l(e(_),{type:"primary",onClick:F},{default:c(()=>[v("新增常见问题")]),_:1})]),_:1})]),_:1})]),_:1},8,["current-page","page-size","columns","data","loading","pagination","onRegister","onRefresh"])]),_:1}))}});export{Nt as default};
