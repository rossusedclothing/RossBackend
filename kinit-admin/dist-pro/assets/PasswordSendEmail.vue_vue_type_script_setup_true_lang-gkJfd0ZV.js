var k=(w,g,s)=>new Promise((_,m)=>{var y=r=>{try{a(s.next(r))}catch(c){m(c)}},d=r=>{try{a(s.throw(r))}catch(c){m(c)}},a=r=>r.done?_(r.value):Promise.resolve(r.value).then(y,d);a((s=s.apply(w,g)).next())});import{a1 as x}from"./index-BSaZkSQ-.js";/* empty css                        *//* empty css                    */import"./el-tooltip-l0sNRNKZ.js";/* empty css                  *//* empty css                      *//* empty css                   */import{t as p,aj as f,ai as B,u as C,b as h}from"./element-plus-BkD8NzPH.js";import{l as E,a as b,ai as N,m as o,p as S,q as v,U as l,O as t,S as i,u as e,M as u,R as O}from"./vue-chunks-o2h5QaLn.js";const P={class:"flex justify-between"},T=v("span",null,"已选用户列表",-1),R=E({__name:"PasswordSendEmail",props:{selections:{type:Object}},setup(w){const s=b(JSON.parse(JSON.stringify(w.selections))),_=b(!1),m=d=>{s.value.splice(d,1)},y=()=>k(this,null,function*(){_.value=!0;const d=s.value.filter(a=>a.reset_password_status!==!0).map(a=>a.id);if(d.length<=0)return h.warning("已全部重置完成，无需重复操作");try{const a=yield x(d);a&&(s.value=a.data,h.success("重置成功"))}finally{_.value=!1}});return(d,a)=>{var c;const r=N("BaseButton");return o(),S("div",null,[v("div",P,[T,l(r,{type:"primary",disabled:((c=s.value)==null?void 0:c.length)===0,loading:_.value,onClick:y},{default:t(()=>[i("确认重置并发送邮件通知")]),_:1},8,["disabled","loading"])]),l(e(C),{data:s.value,stripe:!0,border:!0,style:{width:"100%"},class:"mt-10px","max-height":"500px"},{default:t(()=>[l(e(p),{prop:"id",label:"用户编号",width:"100",align:"center"}),l(e(p),{prop:"name",label:"姓名",width:"120",align:"center"}),l(e(p),{prop:"email",label:"邮箱",width:"200",align:"center"}),l(e(p),{prop:"reset_password_status",label:"重置状态",width:"100",align:"center"},{default:t(n=>[n.row.reset_password_status===!0?(o(),u(e(f),{key:0,type:"success",effect:"dark"},{default:t(()=>[i(" 重置成功 ")]),_:1})):n.row.reset_password_status===!1?(o(),u(e(f),{key:1,type:"danger",effect:"dark"},{default:t(()=>[i(" 重置失败 ")]),_:1})):(o(),u(e(f),{key:2,type:"warning",effect:"dark"},{default:t(()=>[i(" 待重置 ")]),_:1}))]),_:1}),l(e(p),{prop:"send_sms_status",label:"发送状态",width:"100",align:"center"},{default:t(n=>[n.row.send_sms_status===!0?(o(),u(e(f),{key:0,type:"success",effect:"dark"},{default:t(()=>[i(" 发送成功 ")]),_:1})):n.row.send_sms_status===!1?(o(),u(e(f),{key:1,type:"danger",effect:"dark"},{default:t(()=>[i(" 发送失败 ")]),_:1})):(o(),u(e(f),{key:2,type:"warning",effect:"dark"},{default:t(()=>[i(" 待发送 ")]),_:1}))]),_:1}),l(e(p),{prop:"send_sms_msg",label:"描述",align:"center"}),l(e(p),{fixed:"right",label:"操作",width:"100",align:"center"},{default:t(n=>[l(e(B),{title:"确认移除吗?",onConfirm:V=>m(n.$index)},{reference:t(()=>[n.row.send_sms_status!==!0?(o(),u(r,{key:0,link:"",type:"primary",size:"small"},{default:t(()=>[i("移除")]),_:1})):O("",!0)]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])])}}});export{R as _};
