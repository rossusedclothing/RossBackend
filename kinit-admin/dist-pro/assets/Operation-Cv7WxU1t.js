var q=Object.defineProperty;var S=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var k=(l,a,e)=>a in l?q(l,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):l[a]=e,P=(l,a)=>{for(var e in a||(a={}))A.call(a,e)&&k(l,e,a[e]);if(S)for(var e of S(a))L.call(a,e)&&k(l,e,a[e]);return l};var C=(l,a,e)=>new Promise((d,c)=>{var w=r=>{try{m(e.next(r))}catch(s){c(s)}},b=r=>{try{m(e.throw(r))}catch(s){c(s)}},m=r=>r.done?d(r.value):Promise.resolve(r.value).then(w,b);m((e=e.apply(l,a)).next())});import{r as N,d as E,t as V}from"./index-BSaZkSQ-.js";import{u as F,_ as M}from"./Table.vue_vue_type_script_lang-Dze8ZwxX.js";import{_ as Z}from"./Search.vue_vue_type_script_setup_true_lang-D_ZuBLEj.js";import{_ as j}from"./ContentWrap.vue_vue_type_script_setup_true_lang-Bhi8rX8m.js";import{_ as G}from"./Detail.vue_vue_type_script_setup_true_lang-DehAajeG.js";import{_ as H}from"./Dialog.vue_vue_type_style_index_0_lang-CkZ5gdNT.js";import{l as J,Z as $,U as p,S as z,F as B,a as u,m as T,p as K,O as h,u as t,B as D,T as Q,M as W,R as X}from"./vue-chunks-o2h5QaLn.js";import"./element-plus-BkD8NzPH.js";/* empty css                       *//* empty css                 *//* empty css                   *//* empty css                        *//* empty css                    */import"./el-tooltip-l0sNRNKZ.js";/* empty css                  *//* empty css                      *//* empty css                  *//* empty css                        *//* empty css                */import"./useForm-BREZWcm3.js";/* empty css                     *//* empty css               *//* empty css                          *//* empty css                       *//* empty css                       *//* empty css                  *//* empty css                   *//* empty css                *//* empty css                    */import"./style.css_vue_type_style_index_0_src_true_lang-CeSE9S1A.js";import"./wang-editor-D1s6zAlo.js";/* empty css                   *//* empty css                    *//* empty css                         */import"./_Uint8Array-CsvjRP4S.js";import"./useIcon-CkkjqTSS.js";import"./Descriptions-CwTxbgY0.js";/* empty css                  */const Y=l=>N.get({url:"/vadmin/record/operations",params:l}),Le=J({name:"SystemRecordOperation",__name:"Operation",setup(l){const{t:a}=E(),{tableRegister:e,tableState:d,tableMethods:c}=F({fetchDataApi:()=>C(this,null,function*(){const{pageSize:n,currentPage:o}=d,i=yield Y(P({page:t(o),limit:t(n)},t(g)));return{list:i.data||[],total:i.count||0}})}),{dataList:w,loading:b,total:m,pageSize:r,currentPage:s}=d,{getList:_}=c,I=$([{field:"user_id",label:"操作人编号",show:!0,disabled:!0,width:"100px"},{field:"user_name",label:"操作人",show:!0,disabled:!0,width:"100px"},{field:"telephone",label:"手机号",show:!0,disabled:!0,width:"130px"},{field:"request_method",label:"请求方法",show:!0,disabled:!0,width:"100px"},{field:"client_ip",label:"客户端地址",width:"130px",show:!0,disabled:!0},{field:"tags",label:"标签",width:"130px",show:!0},{field:"summary",label:"操作内容",show:!0},{field:"description",label:"描述",show:!1},{field:"status_code",label:"操作状态",show:!0,width:"100px"},{field:"route_name",label:"接口函数",show:!1,width:"150px"},{field:"api_path",label:"接口地址",show:!1},{field:"params",label:"请求参数",show:!1},{field:"browser",label:"浏览器",show:!0,width:"150px"},{field:"system",label:"系统",show:!1,width:"150px"},{field:"process_time",label:"总耗时",show:!0},{field:"create_datetime",label:"操作时间",show:!0},{field:"action",width:"100px",show:!0,label:"操作",slots:{default:n=>{const o=n.row;return p(B,null,[p(V,{type:"primary",link:!0,onClick:()=>U(o,"detail")},{default:()=>[z("详情")]})])}}}]),O=$([{field:"telephone",label:"手机号",component:"Input",componentProps:{clearable:!1}},{field:"request_method",label:"请求方法",component:"Input",componentProps:{clearable:!1}},{field:"summary",label:"操作内容",component:"Input",componentProps:{clearable:!1}}]),g=u({}),v=n=>{s.value=1,g.value=n,_()},f=u(!1),x=u(""),y=u(),R=u(""),U=(n,o)=>{x.value=a("exampleDemo.detail"),R.value=o,y.value=n,f.value=!0};return(n,o)=>(T(),K(B,null,[p(t(j),null,{default:h(()=>[p(t(Z),{schema:O,onReset:v,onSearch:v},null,8,["schema"]),p(t(M),{"current-page":t(s),"onUpdate:currentPage":o[0]||(o[0]=i=>D(s)?s.value=i:null),"page-size":t(r),"onUpdate:pageSize":o[1]||(o[1]=i=>D(r)?r.value=i:null),showAction:"",columns:I,"node-key":"id",data:t(w),loading:t(b),pagination:{total:t(m)},onRegister:t(e),onRefresh:t(_)},null,8,["current-page","page-size","columns","data","loading","pagination","onRegister","onRefresh"])]),_:1}),p(t(H),{modelValue:f.value,"onUpdate:modelValue":o[3]||(o[3]=i=>f.value=i),title:x.value,width:"800px"},{footer:h(()=>[p(t(V),{onClick:o[2]||(o[2]=i=>f.value=!1)},{default:h(()=>[z(Q(t(a)("dialogDemo.close")),1)]),_:1})]),default:h(()=>[R.value==="detail"?(T(),W(G,{key:0,"current-row":y.value},null,8,["current-row"])):X("",!0)]),_:1},8,["modelValue","title"])],64))}});export{Le as default};
