var m=(x,k,d)=>new Promise((u,n)=>{var w=o=>{try{l(d.next(o))}catch(_){n(_)}},h=o=>{try{l(d.throw(o))}catch(_){n(_)}},l=o=>o.done?u(o.value):Promise.resolve(o.value).then(w,h);l((d=d.apply(x,k)).next())});import{g as j,d as C}from"./list-C-9kdBUz.js";import"./index-SAHUQZ2g.js";/* empty css                       *//* empty css                 *//* empty css                   *//* empty css                      *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                        *//* empty css                    */import"./el-tooltip-l0sNRNKZ.js";import{f as L,ao as N,a as p,Q as E,d as S,ag as T,h as B,i as V,j as b,M as t,G as s,K as v,u as e,H as $,E as F,L as y}from"./vue-chunks-wbK7PffK.js";import{d as g,t as a,u as I,v as G,w as H,b as D}from"./element-plus-C0vem28W.js";const K={class:"p-6"},O={class:"flex justify-between items-center mb-4"},P=b("h2",{class:"text-xl font-semibold"},"表单管理",-1),Q={class:"space-x-2"},U={style:{display:"-webkit-box","-webkit-line-clamp":"2","-webkit-box-orient":"vertical",overflow:"hidden","word-break":"break-all"}},q={style:{display:"-webkit-box","-webkit-line-clamp":"2","-webkit-box-orient":"vertical",overflow:"hidden","word-break":"break-all"}},A={style:{display:"-webkit-box","-webkit-line-clamp":"2","-webkit-box-orient":"vertical",overflow:"hidden","word-break":"break-all"}},ce=L({__name:"List",setup(x){const k=N(),d=p([]),u=p(!1);p(!1),p(!1);const n=p([]),w=p(0),h=E({page:1,limit:10,v_order:"desc",v_order_field:void 0});E({id:null,code:"",type:"trial",status:"active",user_limit:1,duration_days:30});const l=()=>m(this,null,function*(){var i;u.value=!0;try{const c=Object.assign(h,{}),f=yield j(c);d.value=f.data||[],w.value=((i=f.data)==null?void 0:i.length)||0}finally{u.value=!1}}),o=i=>{const c=`/businessform/publicform?id=${i.id}`;k.push(c)},_=()=>m(this,null,function*(){H.confirm("确认删除选中的记录吗？","提示").then(()=>m(this,null,function*(){yield C(n.value),D.success("删除成功"),l()}))}),z=i=>m(this,null,function*(){yield C([i.id]),D.success("删除成功"),l()}),M=i=>{n.value=i.map(c=>c.id)};return S(l),(i,c)=>{const f=T("loading");return B(),V("div",K,[b("div",O,[P,b("div",Q,[t(e(g),{type:"success",onClick:l},{default:s(()=>[v("刷新")]),_:1}),t(e(g),{type:"danger",disabled:!n.value.length,onClick:_},{default:s(()=>[v("删除")]),_:1},8,["disabled"])])]),$((B(),F(e(I),{data:d.value,border:"",onSelectionChange:M,class:"rounded-lg shadow"},{default:s(()=>[t(e(a),{fixed:"",type:"selection",width:"50"}),t(e(a),{prop:"id",label:"ID",width:"80"}),t(e(a),{prop:"code",label:"客户名称",tooltipEffect:"",width:"100"},{default:s(r=>[b("label",U,y(r.row.name),1)]),_:1}),t(e(a),{prop:"position",label:"职位",width:"100"}),t(e(a),{prop:"region",label:"地区",width:"100"}),t(e(a),{prop:"factory_spec",label:"公司规模",width:"100"}),t(e(a),{prop:"product",label:"产品",width:"100"}),t(e(a),{prop:"website",label:"网站链接",width:"100"}),t(e(a),{prop:"has_export_experience",label:"有没有做过外贸",width:"100"},{default:s(r=>[b("label",q,y(r.row.has_export_experience==1?"做过":"未做过"),1)]),_:1}),t(e(a),{prop:"export_market",label:"产品出口市场",width:"100"}),t(e(a),{prop:"student_identity",label:"学员身份",width:"100"}),t(e(a),{prop:"num_members_tradeteam",label:"外贸团队人数",width:"100"}),t(e(a),{prop:"company_size",label:"公司人数规模",width:"100"}),t(e(a),{prop:"create_datetime",label:"表单创建时间",width:"100"}),t(e(a),{prop:"update_datetime",label:"表单修改时间",width:"100"}),t(e(a),{prop:"is_delete",label:"删除状态",width:"100"},{default:s(r=>[b("label",A,y(r.row.is_delete==1?"已删除":"未删除"),1)]),_:1}),t(e(a),{fixed:"right",label:"操作",width:"160"},{default:s(r=>[t(e(g),{size:"small",type:"primary",onClick:R=>o(r.row)},{default:s(()=>[v("编辑")]),_:2},1032,["onClick"]),t(e(g),{size:"small",type:"danger",onClick:R=>z(r.row)},{default:s(()=>[v("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[f,u.value]]),t(e(G),{class:"mt-4",background:"",layout:"prev, pager, next","page-size":h.limit,total:w.value,onCurrentChange:l},null,8,["page-size","total"])])}}});export{ce as default};
