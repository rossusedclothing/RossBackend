var Y=Object.defineProperty,ee=Object.defineProperties;var te=Object.getOwnPropertyDescriptors;var V=Object.getOwnPropertySymbols;var se=Object.prototype.hasOwnProperty,ne=Object.prototype.propertyIsEnumerable;var $=(_,s,n)=>s in _?Y(_,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):_[s]=n,q=(_,s)=>{for(var n in s||(s={}))se.call(s,n)&&$(_,n,s[n]);if(V)for(var n of V(s))ne.call(s,n)&&$(_,n,s[n]);return _},k=(_,s)=>ee(_,te(s));var B=(_,s,n)=>new Promise((h,f)=>{var v=c=>{try{x(n.next(c))}catch(l){f(l)}},b=c=>{try{x(n.throw(c))}catch(l){f(l)}},x=c=>c.done?h(c.value):Promise.resolve(c.value).then(v,b);x((n=n.apply(_,s)).next())});import{a as g,Z as L,d as oe,e as N,m as u,p as a,q as e,S as T,F as p,a7 as y,T as d,R as m,a2 as U,P as C,al as z,aJ as ie}from"./vue-chunks-o2h5QaLn.js";import{g as le,a as ue,b as ae}from"./questiong-B6AV4btd.js";import"./index-BSaZkSQ-.js";/* empty css                    */import"./element-plus-BkD8NzPH.js";const de={class:"min-h-screen bg-gray-50 p-6"},re={class:"max-w-6xl mx-auto"},ce={class:"bg-white rounded-lg shadow-lg p-6"},_e={class:"space-y-4"},xe={class:"flex justify-between items-start mb-3"},ve={class:"flex-1"},be={class:"text-lg font-semibold text-gray-800 mb-2"},ge={class:"text-gray-600"},me={class:"flex space-x-2 ml-4"},fe=["onClick"],he=["onClick"],pe=["onClick"],ye={key:0,class:"mt-4 pl-4 border-l-2 border-blue-200"},we={class:"flex justify-between items-center mb-3"},qe=e("h4",{class:"text-md font-medium text-gray-700"},"相关答案",-1),ke=["onClick"],Ce={class:"space-y-2"},Ae={class:"flex justify-between items-start"},Qe={class:"flex-1"},Fe={class:"text-gray-800 mb-1"},je={key:0,class:"text-sm text-blue-600"},Me={class:"flex space-x-2 ml-4"},Se=["onClick"],Ve=["onClick"],$e={key:0,class:"text-gray-500 text-center py-4"},Be={key:0,class:"text-center py-8 text-gray-500"},Le={key:0,class:"mt-8 bg-gray-50 p-4 rounded-lg"},Ne=e("h3",{class:"text-lg font-semibold mb-4 text-gray-800"},"问题流程图",-1),Te={class:"space-y-2"},Ue={class:"font-medium text-blue-600"},ze={class:"ml-4 mt-1"},De={key:0,class:"text-green-600"},Ee={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Ie={class:"bg-white rounded-lg p-6 w-full max-w-md mx-4"},Re={class:"text-xl font-bold mb-4 text-gray-800"},Je={class:"mb-4"},Pe=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"问题内容",-1),Ze={class:"flex justify-end space-x-3"},Ge={type:"submit",class:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors"},He={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Ke={class:"bg-white rounded-lg p-6 w-full max-w-md mx-4"},Oe={class:"text-xl font-bold mb-4 text-gray-800"},We={class:"mb-4"},Xe=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"答案内容",-1),Ye={class:"mb-4"},et=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"下一个问题（可选）",-1),tt=e("option",{value:""},"无跳转",-1),st=["value"],nt={class:"flex justify-end space-x-3"},ot={type:"submit",class:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors"},ct={__name:"Electric",setup(_){g("服装");const s=g([{id:1,question:"您对我们的产品满意吗？"},{id:2,question:"您希望我们改进哪些方面？"},{id:3,question:"您会推荐给朋友吗？"}]),n=g([{id:1,question_id:1,answer:"非常满意",next_question:3},{id:2,question_id:1,answer:"一般满意",next_question:2},{id:3,question_id:1,answer:"不满意",next_question:2},{id:4,question_id:2,answer:"价格方面",next_question:null},{id:5,question_id:2,answer:"功能方面",next_question:null},{id:6,question_id:3,answer:"会推荐",next_question:null},{id:7,question_id:3,answer:"不会推荐",next_question:null}]),h=g(!1),f=g(!1),v=g(new Set),b=g(null),x=g(null),c=L({question:""}),l=L({question_id:null,answer:"",next_question:""});oe(()=>{A()});const A=()=>B(this,null,function*(){const t=yield le();if(t.code==200&&t.data){s.value=t.data;const i=yield ue();i.code==200&&i.data?n.value=i.data:n.value=[]}else return[]}),D=N(()=>s.value.length>0?Math.max(...s.value.map(t=>t.id))+1:1),E=N(()=>n.value.length>0?Math.max(...n.value.map(t=>t.id))+1:1);function w(t){return n.value.filter(i=>i.question_id===t)}function I(t){return s.value.find(i=>i.id===t)}function R(){F(),h.value=!0}function Q(){h.value=!1,b.value=null,F()}function F(){c.question=""}function J(t){b.value=t,c.question=t.question,h.value=!0}function P(){if(b.value){const t=s.value.findIndex(i=>i.id===b.value.id);t!==-1&&(s.value[t]=k(q({},s.value[t]),{question:c.question}))}else ae({question:c.question}).then(t=>{t.value&&s.value.push({id:D.value,question:c.question})});Q()}function Z(t){confirm("确定要删除这个问题吗？删除后相关答案也会被删除。")&&(s.value=s.value.filter(i=>i.id!==t),n.value=n.value.filter(i=>i.question_id!==t),v.value.delete(t))}function G(t){M(),l.question_id=t,f.value=!0}function j(){f.value=!1,x.value=null,M()}function M(){l.question_id=null,l.answer="",l.next_question=""}function H(t){x.value=t,l.question_id=t.question_id,l.answer=t.answer,l.next_question=t.next_question||"",f.value=!0}function K(){if(x.value){const t=n.value.findIndex(i=>i.id===x.value.id);t!==-1&&(n.value[t]=k(q({},n.value[t]),{answer:l.answer,next_question:l.next_question||null}))}else n.value.push({id:E.value,question_id:l.question_id,answer:l.answer,next_question:l.next_question||null});j()}function O(t){confirm("确定要删除这个答案吗？")&&(n.value=n.value.filter(i=>i.id!==t))}function W(t){v.value.has(t)?v.value.delete(t):v.value.add(t)}return(t,i)=>(u(),a("div",de,[e("div",re,[e("div",ce,[e("div",{class:"flex justify-between items-center mb-6"},[e("h1",{class:"text-3xl font-bold text-gray-800"},[T(" 问答配置 "),e("button",{class:"btn",onClick:A},"⭕️")]),e("button",{onClick:R,class:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-colors"}," 新增问题 ")]),e("div",_e,[(u(!0),a(p,null,y(s.value,o=>(u(),a("div",{key:o.id,class:"border border-gray-200 rounded-lg p-4"},[e("div",xe,[e("div",ve,[e("h3",be," 问题 #"+d(o.id)+" "+d(o.question),1),e("p",ge,d(o.question),1)]),e("div",me,[e("button",{onClick:r=>J(o),class:"text-blue-500 hover:text-blue-700 px-3 py-1 rounded"}," 编辑 ",8,fe),e("button",{onClick:r=>Z(o.id),class:"text-red-500 hover:text-red-700 px-3 py-1 rounded"}," 删除 ",8,he),e("button",{onClick:r=>W(o.id),class:"bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded transition-colors"},d(v.value.has(o.id)?"收起答案":"查看答案"),9,pe)])]),v.value.has(o.id)?(u(),a("div",ye,[e("div",we,[qe,e("button",{onClick:r=>G(o.id),class:"bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded text-sm transition-colors"}," 新增答案 ",8,ke)]),e("div",Ce,[(u(!0),a(p,null,y(w(o.id),r=>{var S;return u(),a("div",{key:r.id,class:"bg-gray-50 p-3 rounded border"},[e("div",Ae,[e("div",Qe,[e("p",Fe,d(r.answer),1),r.next_question?(u(),a("p",je," → 跳转到问题 #"+d(r.next_question)+": "+d((S=I(r.next_question))==null?void 0:S.question),1)):m("",!0)]),e("div",Me,[e("button",{onClick:X=>H(r),class:"text-blue-500 hover:text-blue-700 text-sm px-2 py-1 rounded"}," 编辑 ",8,Se),e("button",{onClick:X=>O(r.id),class:"text-red-500 hover:text-red-700 text-sm px-2 py-1 rounded"}," 删除 ",8,Ve)])])])}),128)),w(o.id).length===0?(u(),a("div",$e," 暂无答案 ")):m("",!0)])])):m("",!0)]))),128)),s.value.length===0?(u(),a("div",Be," 暂无问题，点击上方按钮添加第一个问题 ")):m("",!0)]),s.value.length>0?(u(),a("div",Le,[Ne,e("div",Te,[(u(!0),a(p,null,y(s.value,o=>(u(),a("div",{key:o.id,class:"text-sm"},[e("span",Ue,"问题 #"+d(o.id)+" "+d(o.question),1),e("div",ze,[(u(!0),a(p,null,y(w(o.id),r=>(u(),a("div",{key:r.id,class:"text-gray-600"},[T(' "'+d(r.answer)+'" ',1),r.next_question?(u(),a("span",De," → 问题 #"+d(r.next_question),1)):m("",!0)]))),128))])]))),128))])])):m("",!0)])]),h.value?(u(),a("div",Ee,[e("div",Ie,[e("h2",Re,d(b.value?"编辑问题":"新增问题"),1),e("form",{onSubmit:U(P,["prevent"])},[e("div",Je,[Pe,C(e("textarea",{"onUpdate:modelValue":i[0]||(i[0]=o=>c.question=o),class:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"4",placeholder:"请输入问题内容...",required:""},null,512),[[z,c.question]])]),e("div",Ze,[e("button",{type:"button",onClick:Q,class:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors"}," 取消 "),e("button",Ge,d(b.value?"更新":"保存"),1)])],32)])])):m("",!0),f.value?(u(),a("div",He,[e("div",Ke,[e("h2",Oe,d(x.value?"编辑答案":"新增答案"),1),e("form",{onSubmit:U(K,["prevent"])},[e("div",We,[Xe,C(e("textarea",{"onUpdate:modelValue":i[1]||(i[1]=o=>l.answer=o),class:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",rows:"3",placeholder:"请输入答案内容...",required:""},null,512),[[z,l.answer]])]),e("div",Ye,[et,C(e("select",{"onUpdate:modelValue":i[2]||(i[2]=o=>l.next_question=o),class:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"},[tt,(u(!0),a(p,null,y(s.value,o=>(u(),a("option",{key:o.id,value:o.id}," 问题 #"+d(o.id)+": "+d(o.question.substring(0,50))+d(o.question.length>50?"...":""),9,st))),128))],512),[[ie,l.next_question]])]),e("div",nt,[e("button",{type:"button",onClick:j,class:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors"}," 取消 "),e("button",ot,d(x.value?"更新":"保存"),1)])],32)])])):m("",!0)]))}};export{ct as default};
