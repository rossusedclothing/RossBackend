var _=(s,p,a)=>new Promise((u,d)=>{var m=t=>{try{o(a.next(t))}catch(i){d(i)}},f=t=>{try{o(a.throw(t))}catch(i){d(i)}},o=t=>t.done?u(t.value):Promise.resolve(t.value).then(m,f);o((a=a.apply(s,p)).next())});import{u as E,F as V}from"./useForm-B5RQKQQi.js";import{u as A}from"./useValidator-UROf_CnT.js";import{u as F,a as M,e as N,p as q,g as U,_ as D}from"./index-SAHUQZ2g.js";import{f as j,ao as G,e as J,Q as K,a as w,b as Q,a9 as T,h as v,i as $,j as c,M as R,u as h,G as z,K as H,E as L,J as O,au as W,av as X}from"./vue-chunks-wbK7PffK.js";import{_ as Y}from"./Footer.vue_vue_type_script_setup_true_lang-DWAEKflQ.js";import{b as Z}from"./element-plus-C0vem28W.js";/* empty css                     *//* empty css               */import"./el-tooltip-l0sNRNKZ.js";/* empty css                  *//* empty css                 *//* empty css               *//* empty css                    *//* empty css                 *//* empty css                          *//* empty css                       *//* empty css                       *//* empty css                  *//* empty css                  *//* empty css                   *//* empty css                *//* empty css                    */import"./style.css_vue_type_style_index_0_src_true_lang-BFkgkg1x.js";import"./wang-editor-K_dPeC8b.js";/* empty css                   *//* empty css                    *//* empty css                      */const ee=s=>(W("data-v-9f90f1a6"),s=s(),X(),s),te={class:"main-container"},oe={class:"form-container"},se=ee(()=>c("div",null,[c("h2",{class:"text-2xl font-bold text-center w-[100%]"},"第一次登录系统，需先重置密码")],-1)),ae={class:"w-[100%]"},re={class:"footer-container"},ie=j({__name:"Reset",setup(s){const{required:p}=A(),{addRoute:a,push:u,currentRoute:d}=G(),m=F(),f=M(),o=N(),t=J(()=>f.getFooter),i=K([{field:"password",label:"新密码",component:"InputPassword",colProps:{span:24},componentProps:{style:{width:"100%"},placeholder:"请输入新密码"}},{field:"password_two",label:"再次输入新密码",component:"InputPassword",colProps:{span:24},componentProps:{style:{width:"100%"},placeholder:"请再次输入新密码"}}]),b={password:[p(),{min:8,max:16,message:"长度需为8-16个字符,请重新输入。",trigger:"blur"}],password_two:[p(),{min:8,max:16,message:"长度需为8-16个字符,请重新输入。",trigger:"blur"}]},{formRegister:x,formMethods:S}=E(),{setValues:k,getFormData:y,getElFormExpose:B}=S;k(m.getUser);const l=w(!1),g=w("");Q(()=>d.value,e=>{var r;g.value=(r=e==null?void 0:e.query)==null?void 0:r.redirect},{immediate:!0});const P=()=>_(this,null,function*(){if(m.getUser.id===1)return Z.warning("编辑账号为演示账号，无权限操作！");const e=yield B();if(yield e==null?void 0:e.validate()){l.value=!0;const n=yield y();try{(yield q(n))?I():l.value=!1}catch(C){l.value=!1}}}),I=()=>_(this,null,function*(){const e=yield U();if(e){const r=e.data||[];yield o.generateRoutes(r).catch(()=>{}),o.getAddRouters.forEach(n=>{a(n)}),o.setIsAddRouters(!0),u({path:g.value||o.addRouters[0].path})}});return(e,r)=>{const n=T("BaseButton");return v(),$("div",te,[c("div",oe,[se,R(h(V),{onRegister:h(x),schema:i,rules:b,"hide-required-asterisk":"",class:"dark:border-1 dark:border-[var(--el-border-color)] dark:border-solid"},null,8,["onRegister","schema"]),c("div",ae,[R(n,{loading:l.value,type:"primary",class:"w-[100%]",onClick:P},{default:z(()=>[H(" 重置密码 ")]),_:1},8,["loading"])])]),c("div",re,[t.value?(v(),L(h(Y),{key:0})):O("",!0)])])}}}),Ne=D(ie,[["__scopeId","data-v-9f90f1a6"]]);export{Ne as default};
