var K=Object.defineProperty;var A=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var j=(d,o,e)=>o in d?K(d,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):d[o]=e,x=(d,o)=>{for(var e in o||(o={}))N.call(o,e)&&j(d,e,o[e]);if(A)for(var e of A(o))P.call(o,e)&&j(d,e,o[e]);return d};var y=(d,o,e)=>new Promise((g,r)=>{var v=l=>{try{m(e.next(l))}catch(u){r(u)}},_=l=>{try{m(e.throw(l))}catch(u){r(u)}},m=l=>l.done?g(l.value):Promise.resolve(l.value).then(v,_);m((e=e.apply(d,o)).next())});import{f as O,a as b,Q as V,d as S,h as G,i as H,j as k,M as a,a0 as L,u as t,G as i,K as c}from"./vue-chunks-wbK7PffK.js";import"./index-SAHUQZ2g.js";/* empty css                 *//* empty css                        *//* empty css                    */import"./el-tooltip-l0sNRNKZ.js";/* empty css                  *//* empty css               *//* empty css                  *//* empty css                   *//* empty css                     *//* empty css                      *//* empty css                  *//* empty css                       */import{j as Q,k as q,l as J,m as R,n as W}from"./panel-KyxOuRRY.js";import{D as w,d as f,t as C,u as X,v as Y,B as Z,C as B,H as ee,w as D,b as E}from"./element-plus-C0vem28W.js";const ae={class:"p-4"},te={class:"flex justify-between mb-4"},le={class:"flex gap-2"},oe={class:"mt-4 flex justify-end"},xe=O({__name:"FeedbackPage",setup(d){const o=b([]),e=V({page:1,limit:10,total:0,v_order:"desc"}),g=V({app_name:""}),r=b(!1),v=b("新增反馈"),_=b(!1),m=b(null),l=V({app_name:"",text:""}),u=()=>y(this,null,function*(){const s=yield Q(x(x({},e),g));s&&s.data&&(o.value=s.data||[],e.total=s.data.total||o.value.length)});S(u);const h=()=>{e.page=1,u()},z=s=>{e.page=s,u()},I=()=>{_.value=!1,m.value=null,v.value="新增反馈",Object.assign(l,{app_name:"",text:""}),r.value=!0},M=s=>y(this,null,function*(){_.value=!0,m.value=s.id,v.value="编辑反馈";const n=yield q(s.id);n!=null&&n.data&&Object.assign(l,n.data),r.value=!0}),T=s=>{D.alert(s.text||"-","反馈内容")},U=()=>y(this,null,function*(){try{yield _.value?J(m.value,l):R(l),E({message:"保存成功",type:"success"}),r.value=!1,u()}catch(s){E({message:"保存失败",type:"error"})}}),$=s=>{D.confirm("确认删除？","提示").then(()=>y(this,null,function*(){yield W([s.id]),E({message:"删除成功",type:"success"}),u()})).catch(()=>{})};return(s,n)=>(G(),H("div",ae,[k("div",te,[k("div",le,[a(t(w),{modelValue:g.app_name,"onUpdate:modelValue":n[0]||(n[0]=p=>g.app_name=p),placeholder:"按 app 名称搜索",clearable:"",onKeyup:L(h,["enter"])},null,8,["modelValue"]),a(t(f),{onClick:h,type:"primary",plain:""},{default:i(()=>[c("搜索")]),_:1})]),k("div",null,[a(t(f),{type:"primary",onClick:I},{default:i(()=>[c("新增反馈")]),_:1})])]),a(t(X),{data:o.value,stripe:""},{default:i(()=>[a(t(C),{prop:"id",label:"ID",width:"80"}),a(t(C),{prop:"app_name",label:"App 名称"}),a(t(C),{prop:"text",label:"反馈内容"}),a(t(C),{label:"操作",width:"200"},{default:i(p=>[a(t(f),{size:"small",onClick:F=>T(p.row)},{default:i(()=>[c("查看")]),_:2},1032,["onClick"]),a(t(f),{size:"small",type:"primary",onClick:F=>M(p.row)},{default:i(()=>[c("编辑")]),_:2},1032,["onClick"]),a(t(f),{size:"small",type:"danger",onClick:F=>$(p.row)},{default:i(()=>[c("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),k("div",oe,[a(t(Y),{"current-page":e.page,"page-size":e.limit,total:e.total,layout:"prev, pager, next",onCurrentChange:z},null,8,["current-page","page-size","total"])]),a(t(ee),{title:v.value,modelValue:r.value,"onUpdate:modelValue":n[4]||(n[4]=p=>r.value=p)},{footer:i(()=>[a(t(f),{onClick:n[3]||(n[3]=p=>r.value=!1)},{default:i(()=>[c("取消")]),_:1}),a(t(f),{type:"primary",onClick:U},{default:i(()=>[c("保存")]),_:1})]),default:i(()=>[a(t(Z),{model:l},{default:i(()=>[a(t(B),{label:"App 名称"},{default:i(()=>[a(t(w),{modelValue:l.app_name,"onUpdate:modelValue":n[1]||(n[1]=p=>l.app_name=p)},null,8,["modelValue"])]),_:1}),a(t(B),{label:"反馈"},{default:i(()=>[a(t(w),{modelValue:l.text,"onUpdate:modelValue":n[2]||(n[2]=p=>l.text=p),type:"textarea",rows:"4"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","modelValue"])]))}});export{xe as _};
