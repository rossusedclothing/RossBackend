var E=Object.defineProperty;var k=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable;var P=(l,a,t)=>a in l?E(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t,z=(l,a)=>{for(var t in a||(a={}))U.call(a,t)&&P(l,t,a[t]);if(k)for(var t of k(a))V.call(a,t)&&P(l,t,a[t]);return l};var m=(l,a,t)=>new Promise((d,f)=>{var h=s=>{try{u(t.next(s))}catch(n){f(n)}},g=s=>{try{u(t.throw(s))}catch(n){f(n)}},u=s=>s.done?d(s.value):Promise.resolve(s.value).then(h,g);u((t=t.apply(l,a)).next())});import{g as j,d as M}from"./issue-txMQzhJk.js";import{u as N,_ as T}from"./Table.vue_vue_type_script_lang-Dze8ZwxX.js";import{t as _}from"./index-BSaZkSQ-.js";/* empty css                  *//* empty css               */import{_ as H}from"./Search.vue_vue_type_script_setup_true_lang-D_ZuBLEj.js";import{_ as Q}from"./ContentWrap.vue_vue_type_script_setup_true_lang-Bhi8rX8m.js";import{u as Z}from"./dict-DVpgL_Jf.js";import{l as q,aB as G,a as b,Z as A,U as r,F as C,S as v,m as J,M as K,O as c,u as e,B as L}from"./vue-chunks-o2h5QaLn.js";import{Q as W,p as X,j as Y}from"./element-plus-BkD8NzPH.js";/* empty css                       *//* empty css                 *//* empty css                   *//* empty css                        *//* empty css                    */import"./el-tooltip-l0sNRNKZ.js";/* empty css                  *//* empty css                      *//* empty css                  *//* empty css                        *//* empty css                */import"./useForm-BREZWcm3.js";/* empty css                     *//* empty css                          *//* empty css                       *//* empty css                       *//* empty css                   *//* empty css                *//* empty css                    */import"./style.css_vue_type_style_index_0_src_true_lang-CeSE9S1A.js";import"./wang-editor-D1s6zAlo.js";/* empty css                   *//* empty css                    *//* empty css                         */import"./_Uint8Array-CsvjRP4S.js";import"./useIcon-CkkjqTSS.js";import"./dict-Ua4YypUZ.js";const Vt=q({name:"HelpIssue",__name:"Issue",setup(l){const{push:a}=G(),{tableRegister:t,tableState:d,tableMethods:f}=N({fetchDataApi:()=>m(this,null,function*(){const{pageSize:o,currentPage:i}=d,p=yield j(z({page:e(i),limit:e(o)},e(S)));return{list:p.data||[],total:p.count||0}}),fetchDelApi:o=>m(this,null,function*(){return(yield M(o)).code===200})}),{dataList:h,loading:g,total:u,pageSize:s,currentPage:n}=d,{getList:y,delList:O}=f,x=b([]);m(this,null,function*(){const i=yield Z().getDictObj(["sys_vadmin_platform"]);x.value=i.sys_vadmin_platform});const D=A([{field:"id",label:"编号",show:!0,disabled:!0,width:"120px"},{field:"category.name",label:"类别名称",width:"200px",show:!0,disabled:!0},{field:"title",label:"标题",show:!0},{field:"view_number",label:"查看次数",show:!0,width:"100px"},{field:"is_active",label:"是否可见",show:!0,width:"100px",slots:{default:o=>{const i=o.row;return r(C,null,[r(W,{modelValue:i.is_active,disabled:!0},null)])}}},{field:"create_datetime",label:"创建时间",show:!0,width:"200px",sortable:!0},{field:"create_user.name",label:"创建人",show:!0,width:"100px"},{field:"action",width:"120px",label:"操作",show:!0,slots:{default:o=>{const i=o.row;return r(C,null,[r(_,{type:"primary",link:!0,size:"small",onClick:()=>B(i)},{default:()=>[v("编辑")]}),r(_,{type:"danger",loading:w.value,link:!0,size:"small",onClick:()=>$(i)},{default:()=>[v("删除")]})])}}}]),I=A([{field:"name",label:"类别名称",component:"Input",componentProps:{clearable:!0,style:{width:"214px"}}},{field:"platform",label:"登录平台",component:"Select",componentProps:{style:{width:"214px"},options:x.value}},{field:"is_active",label:"是否可见",component:"Select",componentProps:{style:{width:"214px"},options:[{label:"可见",value:!0},{label:"不可见",value:!1}]}}]),S=b({}),R=o=>{n.value=1,S.value=o,y()},w=b(!1),$=o=>m(this,null,function*(){w.value=!0,yield O(!0,[o.id]).finally(()=>{w.value=!1})}),B=o=>m(this,null,function*(){a(`/help/issue/form?id=${o.id}`)}),F=()=>{a("/help/issue/form")};return(o,i)=>(J(),K(e(Q),null,{default:c(()=>[r(e(H),{schema:I,onReset:R,onSearch:R},null,8,["schema"]),r(e(T),{"current-page":e(n),"onUpdate:currentPage":i[0]||(i[0]=p=>L(n)?n.value=p:null),"page-size":e(s),"onUpdate:pageSize":i[1]||(i[1]=p=>L(s)?s.value=p:null),showAction:"",columns:D,"default-expand-all":"","node-key":"id",data:e(h),loading:e(g),pagination:{total:e(u)},onRegister:e(t),onRefresh:e(y)},{toolbar:c(()=>[r(e(X),{gutter:10},{default:c(()=>[r(e(Y),{span:1.5},{default:c(()=>[r(e(_),{type:"primary",onClick:F},{default:c(()=>[v("新增常见问题")]),_:1})]),_:1})]),_:1})]),_:1},8,["current-page","page-size","columns","data","loading","pagination","onRegister","onRefresh"])]),_:1}))}});export{Vt as default};
