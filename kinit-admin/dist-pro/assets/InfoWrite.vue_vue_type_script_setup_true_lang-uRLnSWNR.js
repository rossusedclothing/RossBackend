var f=(u,s,o)=>new Promise((a,n)=>{var i=e=>{try{r(o.next(e))}catch(t){n(t)}},p=e=>{try{r(o.throw(e))}catch(t){n(t)}},r=e=>e.done?a(e.value):Promise.resolve(e.value).then(i,p);r((o=o.apply(u,s)).next())});import{u as _,F as w}from"./useForm-BREZWcm3.js";import{u as I}from"./useValidator-B2HgF5Uc.js";import{u as k,t as y,v as F}from"./index-BSaZkSQ-.js";import{b as g}from"./element-plus-BkD8NzPH.js";import{l as U,Z as x,U as m,S as D,F as R,a as S,m as V,M as B,u as v}from"./vue-chunks-o2h5QaLn.js";const A=U({__name:"InfoWrite",setup(u){const{required:s,isTelephone:o}=I(),a=k(),n=x([{field:"name",label:"用户名称",component:"Input",colProps:{span:24},formItemProps:{rules:[s()]},componentProps:{style:{width:"50%"}}},{field:"nickname",label:"用户昵称",component:"Input",colProps:{span:24},componentProps:{style:{width:"50%"}}},{field:"telephone",label:"手机号",component:"Input",colProps:{span:24},formItemProps:{rules:[s(),{validator:o,trigger:"blur"}]},componentProps:{style:{width:"50%"},maxlength:11}},{field:"gender",label:"性别",colProps:{span:24},formItemProps:{rules:[s()]},component:"RadioGroup",componentProps:{options:[{label:"男",value:"0"},{label:"女",value:"1"}]}},{field:"save",colProps:{span:24},formItemProps:{slots:{default:()=>m(R,null,[m("div",{class:"w-[50%]"},[m(y,{loading:c.value,type:"primary",class:"w-[100%]",onClick:h},{default:()=>[D("保存")]})])])}}}]),{formRegister:i,formMethods:p}=_(),{setValues:r,getFormData:e,getElFormExpose:t}=p;r(a.getUser);const c=S(!1),h=()=>f(this,null,function*(){if(a.getUser.id===1)return g.warning("编辑账号为演示账号，无权限操作！");const l=yield t();if(yield l==null?void 0:l.validate()){c.value=!0;const b=yield e();try{const d=yield F(b);d&&(a.updateUser(d.data),g.success("保存成功"))}finally{c.value=!1}}});return(l,P)=>(V(),B(v(w),{onRegister:v(i),schema:n,"hide-required-asterisk":"",class:"dark:border-1 dark:border-[var(--el-border-color)] dark:border-solid"},null,8,["onRegister","schema"]))}});export{A as _};
