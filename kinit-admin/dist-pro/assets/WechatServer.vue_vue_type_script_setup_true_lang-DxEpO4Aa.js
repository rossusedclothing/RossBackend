var f=(c,n,a)=>new Promise((i,p)=>{var m=e=>{try{o(a.next(e))}catch(s){p(s)}},u=e=>{try{o(a.throw(e))}catch(s){p(s)}},o=e=>e.done?i(e.value):Promise.resolve(e.value).then(m,u);o((a=a.apply(c,n)).next())});import{u as b,F as I}from"./useForm-B5RQKQQi.js";import{k as S,v as A,a4 as D,O as E}from"./index-SAHUQZ2g.js";import{u as F}from"./useValidator-UROf_CnT.js";import{b as v}from"./element-plus-C0vem28W.js";import{f as V,Q as w,M as x,K as k,F as B,a as y,h as C,E as M,u as g}from"./vue-chunks-wbK7PffK.js";const W=V({__name:"WechatServer",props:{tabId:S.number},setup(c){const{required:n}=F(),a=c,i=w([{field:"wx_server_app_id",label:"AppID",colProps:{span:24},component:"Input",componentProps:{style:{width:"500px"}}},{field:"wx_server_app_secret",label:"AppSecret",colProps:{span:24},component:"Input",componentProps:{style:{width:"500px"}}},{field:"wx_server_email",label:"官方邮件",colProps:{span:24},component:"Input",componentProps:{style:{width:"500px"}}},{field:"wx_server_phone",label:"服务热线",colProps:{span:24},component:"Input",componentProps:{style:{width:"500px"}}},{field:"wx_server_site",label:"官方邮箱",colProps:{span:24},component:"Input",componentProps:{style:{width:"500px"}}},{field:"active",label:"",colProps:{span:24},formItemProps:{slots:{default:()=>x(B,null,[x(A,{loading:l.value,type:"primary",onClick:P},{default:()=>[k("立即提交")]})])}}}]),p=w({wx_server_app_id:[n()],wx_server_app_secret:[n()]}),{formRegister:m,formMethods:u}=b(),{setValues:o,getFormData:e,getElFormExpose:s}=u;let h=y({});const d=()=>f(this,null,function*(){const t=yield E({tab_id:a.tabId});if(t){yield o(t.data),h.value=t.data;const r=yield s();r==null||r.clearValidate()}}),l=y(!1),P=()=>f(this,null,function*(){const t=yield s();if(yield t==null?void 0:t.validate()){const _=yield e();if(l.value=!0,!_)return l.value=!1,v.error("未获取到数据");try{if(yield D(_))return d(),v.success("更新成功")}finally{l.value=!1}}});return d(),(t,r)=>(C(),M(g(I),{rules:p,onRegister:g(m),schema:i},null,8,["rules","onRegister","schema"]))}});export{W as _};
