var m=(x,y,d)=>new Promise((u,n)=>{var w=o=>{try{l(d.next(o))}catch(_){n(_)}},h=o=>{try{l(d.throw(o))}catch(_){n(_)}},l=o=>o.done?u(o.value):Promise.resolve(o.value).then(w,h);l((d=d.apply(x,y)).next())});import{g as S,d as C}from"./list-D54TcLRK.js";import"./index-BSaZkSQ-.js";/* empty css                       *//* empty css                 *//* empty css                   *//* empty css                      *//* empty css                    *//* empty css                  *//* empty css                  *//* empty css                        */import"./el-tooltip-l0sNRNKZ.js";import{l as T,aB as N,a as p,Z as B,d as V,ar as $,m as E,p as j,q as b,U as t,O as s,S as v,u as e,P as F,M as I,T as g}from"./vue-chunks-o2h5QaLn.js";import{d as k,t as a,u as L,v as O,w as P,b as D}from"./element-plus-BkD8NzPH.js";const U={class:"p-6"},q={class:"flex justify-between items-center mb-4"},Z=b("h2",{class:"text-xl font-semibold"},"表单管理",-1),A={class:"space-x-2"},G={style:{display:"-webkit-box","-webkit-line-clamp":"2","-webkit-box-orient":"vertical",overflow:"hidden","word-break":"break-all"}},H={style:{display:"-webkit-box","-webkit-line-clamp":"2","-webkit-box-orient":"vertical",overflow:"hidden","word-break":"break-all"}},J={style:{display:"-webkit-box","-webkit-line-clamp":"2","-webkit-box-orient":"vertical",overflow:"hidden","word-break":"break-all"}},ne=T({__name:"List",setup(x){const y=N(),d=p([]),u=p(!1);p(!1),p(!1);const n=p([]),w=p(0),h=B({page:1,limit:10,v_order:"desc",v_order_field:void 0});B({id:null,code:"",type:"trial",status:"active",user_limit:1,duration_days:30});const l=()=>m(this,null,function*(){var i;u.value=!0;try{const c=Object.assign(h,{}),f=yield S(c);d.value=f.data||[],w.value=((i=f.data)==null?void 0:i.length)||0}finally{u.value=!1}}),o=i=>{const c=`/businessform/publicform?id=${i.id}`;y.push(c)},_=()=>m(this,null,function*(){P.confirm("确认删除选中的记录吗？","提示").then(()=>m(this,null,function*(){yield C(n.value),D.success("删除成功"),l()}))}),z=i=>m(this,null,function*(){yield C([i.id]),D.success("删除成功"),l()}),M=i=>{n.value=i.map(c=>c.id)};return V(l),(i,c)=>{const f=$("loading");return E(),j("div",U,[b("div",q,[Z,b("div",A,[t(e(k),{type:"success",onClick:l},{default:s(()=>[v("刷新")]),_:1}),t(e(k),{type:"danger",disabled:!n.value.length,onClick:_},{default:s(()=>[v("删除")]),_:1},8,["disabled"])])]),F((E(),I(e(L),{data:d.value,border:"",onSelectionChange:M,class:"rounded-lg shadow"},{default:s(()=>[t(e(a),{fixed:"",type:"selection",width:"50"}),t(e(a),{prop:"id",label:"ID",width:"80"}),t(e(a),{prop:"code",label:"客户名称",tooltipEffect:"",width:"100"},{default:s(r=>[b("label",G,g(r.row.name),1)]),_:1}),t(e(a),{prop:"position",label:"职位",width:"100"}),t(e(a),{prop:"region",label:"地区",width:"100"}),t(e(a),{prop:"factory_spec",label:"公司规模",width:"100"}),t(e(a),{prop:"product",label:"产品",width:"100"}),t(e(a),{prop:"website",label:"网站链接",width:"100"}),t(e(a),{prop:"has_export_experience",label:"有没有做过外贸",width:"100"},{default:s(r=>[b("label",H,g(r.row.has_export_experience==1?"做过":"未做过"),1)]),_:1}),t(e(a),{prop:"export_market",label:"产品出口市场",width:"100"}),t(e(a),{prop:"student_identity",label:"学员身份",width:"100"}),t(e(a),{prop:"num_members_tradeteam",label:"外贸团队人数",width:"100"}),t(e(a),{prop:"company_size",label:"公司人数规模",width:"100"}),t(e(a),{prop:"create_datetime",label:"表单创建时间",width:"100"}),t(e(a),{prop:"update_datetime",label:"表单修改时间",width:"100"}),t(e(a),{prop:"is_delete",label:"删除状态",width:"100"},{default:s(r=>[b("label",J,g(r.row.is_delete==1?"已删除":"未删除"),1)]),_:1}),t(e(a),{fixed:"right",label:"操作",width:"160"},{default:s(r=>[t(e(k),{size:"small",type:"primary",onClick:R=>o(r.row)},{default:s(()=>[v("编辑")]),_:2},1032,["onClick"]),t(e(k),{size:"small",type:"danger",onClick:R=>z(r.row)},{default:s(()=>[v("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[f,u.value]]),t(e(O),{class:"mt-4",background:"",layout:"prev, pager, next","page-size":h.limit,total:w.value,onCurrentChange:l},null,8,["page-size","total"])])}}});export{ne as default};
